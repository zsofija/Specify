
<div class="wrapper">
    <div class="mdl-grid">
<!-- Page header -->
        <div class="mdl-color-text--white mdl-cell mdl-cell--12-col header">
          <button id="ascending" class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored" onclick="sortListDir()"><img src="/images/order-alphabetical-ascending.svg"><span class="tooltiptext">Sort ascending/descending</span></button>
            <h4 data-ui-field="title">My Inventory</h4>
            <!-- <span> -->
              
              <button id="sortby" class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored"><i class="material-icons md28px">sort</i><span class="tooltiptext">Sort by...</span></button>
                <ul class="mdl-menu mdl-js-menu mdl-js-ripple-effect" for="sortby">
                  <li class="mdl-menu__item">Newest First</li>
                  <li class="mdl-menu__item">Oldest First</li>
                  <li disabled class="mdl-menu__item">Quantity Ascending</li>
                  <li class="mdl-menu__item">Quantity Descending</li>
                  <li class="mdl-menu__item--full-bleed-divider"></li>
                  <li data-ui-include="templates/category_selector" class="mdl-menu__item"></li>
                </ul>
              <!-- <button id="descending" class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored"><img src="/images/order-alphabetical-descending.svg"><span class="tooltiptext">Sort descending</span></button> -->
            <!-- </span> -->
        </div>
        <a id="top"></a> <!--Scroll to top -->
        
<!-- Main content -->        
        <ul class="mdl-list" id="product_list">
            <div class="mdl-cell mdl-cell--12-col row">
              <h6 class="mdl-color-text--grey-600" id="stock">In Stock</h6>
            </div>
            <!--First list item with secondary info-->
            <div class="gesture" data-ui-field="list-item" data-ui-load="@lib/controllers/gesture_helper"
                  data-ui-options="gesture_options">
            <li data-ui-field="first-list-item" class="mdl-list__item mdl-list__item--two-line">
                <span class="mdl-list__item-primary-content">
                    <img data-ui-field="product-image" class="mdl-list__item-avatar"src="https://static.openfoodfacts.org/images/products/807/680/951/3753/front_fr.123.400.jpg"></img>
                    <span data-ui-field="product-name" class="product_name">Pesto alla Genovese</span>
                    <span data-ui-field="barcode" class="mdl-list__item-sub-title">8076809513753</span>
                </span>
                <span class="mdl-list__item-secondary-content">
                    <span class="secondary-info"></span>
                    <span data-ui-field="in-stock" class="mdl-list__item-secondary-action">
                      <i class="material-icons-outlined mdl-color-text--grey-900">pending_actions</i>
                      <div class="mdl-textfield mdl-js-textfield">
                        <input data-ui-field="stock-level" class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="quickedit">
                        <label data-ui-field="current-value" class="mdl-textfield__label" for="quickedit">48</label>
                      </div>
                      <i class="material-icons md40px">chevron_left</i></span>
                </span>
                <div data-ui-field="swipe-menu" class="hidden-options"><a href="#" onclick="select_page('edit')"><i class="material-icons mdl-color-text--grey-900">edit</i></a></div>
            </li>
            
           </div>
            <!-- Other list items from template-->
            <div class="gesture" data-ui-field="list-item" data-ui-load="@lib/controllers/gesture_helper"
                  data-ui-options="gesture_options">
            <li data-ui-include="templates/list_item" class="mdl-color--amber-50">
              <span>
                  <img data-ui-field="product-image" src="https://static.openfoodfacts.org/images/products/841/007/649/0711/front_nb.12.400.jpg"></img>
                  <span data-ui-field="product-name" class="product_name">Spice Mix for Fajitas</span>
                  <span data-ui-field="barcode">8410076490711</span>
              </span>
              <span class="mdl-list__item-secondary-content">
                  <span data-ui-field="in-stock"><i class="material-icons-outlined mdl-color-text--grey-900">pending_actions</i>
                    <div class="mdl-textfield mdl-js-textfield">
                      <input data-ui-field="stock-level" class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="quickedit">
                      <label data-ui-field="current-value" class="mdl-textfield__label" for="quickedit">23</label>
                    </div>
                    <i class="material-icons md40px">chevron_left</i></span>
              </span>
              <div data-ui-field="swipe-menu" class="hidden-options"><a href="#" onclick="select_page('edit')"><i class="material-icons mdl-color-text--grey-900">edit</i></a></div>
            </li>
            </div>
            <div class="gesture" data-ui-field="list-item" data-ui-load="@lib/controllers/gesture_helper"
                  data-ui-options="gesture_options">
            <li data-ui-include="templates/list_item">
                <span>
                    <img data-ui-field="product-image" src="https://static.openfoodfacts.org/images/products/705/933/007/1610/front_nb.19.400.jpg"></img>
                    <span data-ui-field="product-name" class="product_name">Ã˜kologisk Kokosmelk</span>
                    <span data-ui-field="barcode">7059330071610</span>
                </span>
                <span class="mdl-list__item-secondary-content">
                    <span data-ui-field="in-stock"><i class="material-icons-outlined mdl-color-text--grey-900">pending_actions</i>
                      <div class="mdl-textfield mdl-js-textfield">
                        <input data-ui-field="stock-level" class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="quickedit">
                        <label data-ui-field="current-value" class="mdl-textfield__label" for="quickedit">31</label>
                      </div>
                      <i class="material-icons md40px">chevron_left</i></span>
                </span>
                <div data-ui-field="swipe-menu" class="hidden-options"><a href="#" onclick="select_page('edit')"><i class="material-icons mdl-color-text--grey-900">edit</i></a></div>
                <div> <a href="#" onclick=""><i class="material-icons-outlined mdl-color-text--grey-900">pending_actions</i></a></div>
            </li>
          </div>
        </ul>
    </div>
</div>
<!--Scroll to top -->
<div class="to-top">
  <a class="mdl-typography--font-light" href="#top">
    Back to Top
    <i class="material-icons">arrow_upward</i>
  </a>
</div>

<!-- <a class="edit" href="#" onclick="select_page('edit')"><i class="material-icons">edit</i></a> -->

<script>

// const listItem = document.getElementsByClassName('gesture');
// const hiddenElement = document.getElementsByClassName('hidden-options');

// const unorderedList = document.querySelector('ul');
// const collection = unorderedList.children;
// let position = ['left', 'center', 'right'];
// function touchscreen_move(item){
//   for (let list_item in collection) {
//     if collection[list_item]
//   }

// }

function swipe_item(item_index,direction){
  let gestureElements = document.getElementsByClassName('gesture');
  let hiddenElements = document.getElementsByClassName('hidden-options');
  if (direction == 'left'){
    gestureElements[item_index].setAttribute("class", "swipeleft");
    // hiddenElements[item_index].classList.toggle('shown-options');
    hiddenElements[item_index].classList.add("class", "shown-options");
  } else if (direction == 'right'){
    gestureElements[item_index].classList.remove("class", "swipeleft");
    // gestureElements[item_index].removeAttribute("class", "swipeleft");
    gestureElements[item_index].classList.add("class", "swiperight");
    hiddenElements[item_index].classList.remove("class", "shown-options");
  }
}

// pageBody.onload = function() {
  //  let gestureElements = document.getElementsByClassName('gesture');
  //  let hiddenElements = document.getElementsByClassName('hidden-options');
  const listItem = document.getElementsByClassName('gesture');
  const hiddenElement = document.getElementsByClassName('hidden-options');
   var gesture_options = {
        ready: function() {
          // register event callbacks
          this.on('gesture:swipe', function(e, tp) {
            swipe_item(1,tp.direction)
            
              // gestureElements[i].setAttribute("class", "swipeleft");
              // hiddenElements[j].classList.toggle('shown-options');
              // swipe_item(1,"left")

              // listItem.item(0).setAttribute("class", "swipeleft");
              // hiddenElement.item(0).classList.toggle('shown-options');

          });
        }
      }

  





  // for (let item_index=0; item_index < gestureElements.length; item_index++){
    // var gesture_options = {
    //     ready: function() {
    //       // register event callbacks
    //       this.on('gesture:touch', function(e, tp) {
    //         // select_page("edit");
    //       }).on('gesture:pan', function(e, tp) {
    //         // select_page("edit");
    //       }).on('gesture:release', function(e, tp) {
    //         // TODO: handle release
    //       }).on('gesture:tap', function(e, tp) {
    //         // select_page("edit");
    //       }).on('gesture:swipe', function(e, tp) {
    //         alert("ASD");
    //           swipe_item(0,tp.direction);
              
    //       });
    //     }
    //   }
  // }
// }


//   
//     for (let i=0; i < gestureElements.length; i++){
//       let gestureElement = gestureElements[i];
//       for (let j=0; hiddenElements.length; j++) {
//         let hiddenElement = hiddenElements[j];

//         



// SORT LIST ASCENDING and Descending

function sortListDir() {
  var list, i, switching, b, shouldSwitch, dir, switchcount = 0;
  list = document.getElementById("product_list");
  switching = true;
  dir = "asc";
  while (switching) {
    switching = false;
    b = list.getElementsByClassName("mdl-list__item");
    for (i = 0; i < (b.length - 1); i++) {
      shouldSwitch = false;
      
      if (dir == "asc") {
        if (b[i].innerHTML.toLowerCase() > b[i + 1].innerHTML.toLowerCase()) {
          
          shouldSwitch = true;
          break;
        }
      } else if (dir == "desc") {
        if (b[i].innerHTML.toLowerCase() < b[i + 1].innerHTML.toLowerCase()) {
          
          shouldSwitch= true;
          break;
        }
      }
    }
    if (shouldSwitch) {
      b[i].parentNode.insertBefore(b[i + 1], b[i]);
      switching = true;
      
      switchcount ++;
    } else {
  
      if (switchcount == 0 && dir == "asc") {
        dir = "desc";
        switching = true;
      }
    }
  }
}


</script>

