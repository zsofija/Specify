/* zUIx v1.0.1 18.08.30 21:48:09 */

/*
 @license
 Copyright 2015-2018 G-Labs. All Rights Reserved.
         https://zuixjs.github.io/zuix

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/

// 'use strict';(function(m){"object"===typeof exports&&"undefined"!==typeof module?module.exports=m():"function"===typeof define&&define.amd?define([],m):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).zuix=m()})(function(){return function(){function m(r,x,a){function l(e,h){if(!x[e]){if(!r[e]){var b="function"==typeof require&&require;if(!h&&b)return b(e,!0);if(k)return k(e,!0);h=Error("Cannot find module '"+e+"'");throw h.code="MODULE_NOT_FOUND",
// h;}h=x[e]={exports:{}};r[e][0].call(h.exports,function(b){return l(r[e][1][b]||b)},h,h.exports,m,r,x,a)}return x[e].exports}for(var k="function"==typeof require&&require,f=0;f<a.length;f++)l(a[f]);return l}return m}()({1:[function(m,r,x){function a(d){b=d}function l(){null!==d&&(cancelAnimationFrame(d),d=null);h++;if(h<e.length&&!b.willBreak())return f(),!0;(h>=e.length||b.willBreak())&&k();return!1}function k(d){h=-1;e.length=0;e=[];b.status(null!=d?d:"done")}function f(){const a=e[h];if(null==a)return!1;
// const f=function(){null!==d&&(cancelAnimationFrame(d),d=null);b.doWork(a.item,function(){d=requestAnimationFrame(l)})||l()};if(a.cancelable)if(b.willBreak())k("stopped");else if(null==d)d=requestAnimationFrame(f);else return!1;else f();return!0}a.prototype.isReady=function(){return 0===e.length||-1===h};a.prototype.getJobs=function(){return e};a.prototype.setJobs=function(d){0<e.length?(h=-1,e.length=0):(e=d.slice(),b.status("start",e),l())};a.prototype.append=function(b){this.isReady()?this.setJobs(b):
// Array.prototype.push.apply(e,b)};let e=[],h=-1,b=null,d=null;r.exports=function(b){return new a(b)}},{}],2:[function(m,r,x){function a(a){k=window?window.console:{};f=window?window:{};this._timers={};this.args=function(b,d,a){b="%c "+d+" %c"+(new Date).toISOString()+" %c"+b;d=["background-color:rgba(200,200,200,0.2);color:#8a53ff;","background-color:rgba(200,200,200,0.2);color:#777777","background-color:rgba(200,200,200,0.2);color:#888888;"];for(var e=0;e<a.length;e++)if("string"==typeof a[e]&&0===
// a[e].indexOf("timer:")){const f=a[e].split(":");if(3===f.length){let c;switch(f[2]){case "start":this._timers[f[1]]=(new Date).getTime();b+=" %cSTART "+f[1];d.push("background-color:rgba(200,200,200,0.2);color:#999900;");break;case "stop":c=(new Date).getTime()-this._timers[f[1]],b+=" %cSTOP "+f[1]+" "+c+" ms",200<c?d.push("background-color:rgba(200,200,200,0.2);color:#ff0000;"):100<c?d.push("background-color:rgba(200,200,200,0.2);color:#ff7700;"):d.push("background-color:rgba(200,200,200,0.2);color:#00aa00;")}}}b+=
// " \n%c ";d.push("background-color:transparent;color:inherit;");for(e=d.length-1;0<=e;e--)Array.prototype.unshift.call(a,d[e]);Array.prototype.unshift.call(a,b);Array.prototype.push.call(a,"\n\n")};this.log=function(b,d){"function"===typeof e&&e.call(a,b,d);f.zuixNoConsoleOutput||(this.args(a,b,d),k.log.apply(k,d))}}const l="log info warn error debug trace dir group groupCollapsed groupEnd time timeEnd profile profileEnd dirxml assert count markTimeline timeStamp clear".split(" ");let k=null,f=null,
// e=null;a.prototype.monitor=function(a){e=a};a.prototype.console=function(a){if(a)window.console=k;else for(window.console={},a=0;a<l.length;a++)window.console[l[a]]||(window.console[l[a]]=function(){})};a.prototype.i=a.prototype.info=a.prototype.l=a.prototype.log=function(){this.log("INFO",arguments);return this};a.prototype.w=a.prototype.warn=function(){this.log("WARN",arguments);return this};a.prototype.e=a.prototype.error=function(){this.log("ERROR",arguments);return this};a.prototype.d=a.prototype.debug=
// function(){this.log("DEBUG",arguments);return this};a.prototype.t=a.prototype.trace=function(){this.log("TRACE",arguments);return this};r.exports=function(e){return new a(e)}},{}],3:[function(m,r,x){function a(a){const f=this;f._worker=null;f._taskList=[];f._requests=[];null==a&&(a=function(){});f.taskQueue=function(e,k,b){f._taskList.push({tid:e,fn:k,status:0,priority:b,step:function(b){l.t(b,"load:step");a(f,"load:step",{task:b})},end:function(){this.status=2;l.t(this.tid,"load:next","timer:task:stop");
// a(f,"load:next",{task:this.tid});f._taskList.splice(this.index,1);f.taskCheck();null!=this._callback&&this._callback.call(this)},callback:function(b){this._callback=b}});l.t(e,"task added",b,"priority");f._taskList.sort(function(b,a){return b.priority>a.priority?1:a.priority>b.priority?-1:0});f.taskCheck()};f.taskCheck=function(){for(let e=0;e<f._taskList.length;e++){if(0===f._taskList[e].status){f._taskList[e].status=1;l.t(f._taskList[e].tid,"load:begin","timer:task:start");a(f,"load:begin",{task:f._taskList[e].tid});
// f._taskList[e].index=e;f._taskList[e].fn.call(f._taskList[e]);return}if(1===f._taskList[e].status||2===f._taskList[e].status)return}l.t("load:end");a(f,"load:end")}}const l=m("./Logger")("TaskQueue.js");a.prototype.callback=function(a){};a.prototype.queue=function(a,f,e){return this.taskQueue(a,f,e)};r.exports=a},{"./Logger":2}],4:[function(m,r,x){r.exports={isIE:function(){return 0<window.navigator.userAgent.indexOf("Trident")},isNoU:function(a){return"undefined"===typeof a||null===a},isFunction:function(a){return"function"===
// typeof a},objectEquals:function(a,l){if(null===a||void 0===a||null===l||void 0===l)return a===l;if(a.constructor!==l.constructor)return!1;if(a instanceof Function||a instanceof RegExp)return a===l;if(a===l||a.valueOf()===l.valueOf())return!0;if(Array.isArray(a)&&a.length!==l.length||a instanceof Date||!(a instanceof Object)||!(l instanceof Object))return!1;const k=Object.keys(a);return Object.keys(l).every(function(a){return-1!==k.indexOf(a)})&&k.every(function(f){return util.objectEquals(a[f],l[f])})},
// propertyFromPath:function(a,l){if("string"===typeof l){l=l.replace(/\[(\w+)\]/g,".$1");l=l.replace(/^\./,"");l=l.split(".");for(let k=0;k<l.length;++k){const f=l[k];if("undefined"!==typeof a[f])a=a[f];else return}return a}},cloneObject:function k(l){if(null===l||"object"!==typeof l)return l;let f=l;try{f=l.constructor();for(let e in l)l.hasOwnProperty(e)&&(f[e]=k(l[e]))}catch(e){}return f},hasPassiveEvents:function(){let l=!1;try{const k=Object.defineProperty({},"passive",{get:function(){l=!0}});
// window.addEventListener("testPassive",null,k);window.removeEventListener("testPassive",null,k)}catch(k){}return l}}},{}],5:[function(m,r,x){function a(c){f(this,c.type,c)}function l(c,d,e,f){let C=!1;g.each(z,function(){if(this.element===c&&this.path===d&&this.handler===e)return b.w("Handler already registered",c,d,e),C=!0,!1});C||(z.push({element:c,path:d,handler:e,opgions:f}),c.addEventListener(d,a,!B||null!=f&&!1===f.passive?!1:{passive:!0}))}function k(c,b,d){let C=1,e=-1;g.each(z,function(a){this.element===
// c&&this.path===b&&this.handler===d&&(C--,e=a)});-1!==e&&z.splice(e,1);0===C&&c.removeEventListener(b,a)}function f(c,b,d){const a=g(c);g.each(z,function(){this.element===c&&this.path===b&&this.handler.call(a,d,a)})}function e(c){g.each(z,function(){this.element===c&&(b.t("Removing event handler",this.element,this.path,this.handler),k(this.element,this.path,this.handler))})}function h(c){this._selection=[];"undefined"===typeof c&&(c=document.documentElement);if(c instanceof h)return c;if(c instanceof
// HTMLCollection||c instanceof NodeList){const b=this._selection=[];g.each(c,function(c,a){b.push(a)})}else if(Array.isArray(c))this._selection=c;else if(c===window||c instanceof HTMLElement||c instanceof Node)this._selection=[c];else if("string"===typeof c)this._selection=document.documentElement.querySelectorAll(c);else if(null!==c)throw b.e("ZxQuery cannot wrap object of this type.",typeof c,c),Error("ZxQuery cannot wrap object of this type.");return this}const b=m("./Logger")("TaskQueue.js"),d=
// m("./Util.js");let B=d.hasPassiveEvents();const z=[];h.prototype.length=function(){return this._selection.length};h.prototype.parent=function(c){return d.isNoU(c)?new h(this._selection[0].parentNode):new h(g.getClosest(this._selection[0],c))};h.prototype.children=function(c){return d.isNoU(c)?new h(this._selection[0].children):new h(this._selection[0].querySelectorAll(c))};h.prototype.reverse=function(){this._selection=Array.prototype.slice.call(this._selection,0).reverse();return this};h.prototype.get=
// function(c){d.isNoU(c)&&(c=0);return this._selection[c]};h.prototype.eq=function(c){const b=this._selection;let a=b[c];1<arguments.length&&(a=[],g.each(arguments,function(c,d){null!=b[d]&&a.push(b[d])}));return new h(a)};h.prototype.find=function(c){return new h(this._selection[0].querySelectorAll(c))};h.prototype.each=function(c){g.each(this._selection,c);return this};h.prototype.attr=function(c,b){const a=this;if("object"===typeof c)g.each(c,function(c,b){a.each(function(a,d){d.setAttribute(c,b)})});
// else{if("undefined"==typeof b)return this._selection[0].getAttribute(c);null===b?this._selection[0].removeAttribute(c):this.each(function(a,d){this.get().setAttribute(c,b)})}return this};h.prototype.trigger=function(c,b){let a;window.CustomEvent?a=new CustomEvent(c,{detail:b}):(a=document.createEvent("CustomEvent"),a.initCustomEvent(c,!0,!0,b));this.each(function(c,b){b.dispatchEvent(a)});return this};h.prototype.one=function(c,b){let a=!1;this.on(c,function(d,e){a||(a=!0,g(this).off(c,b),b.call(this,
// d,e,this))});return this};h.prototype.on=function(c,b){const a=c.match(/\S+/g)||[];let d;"function"!==typeof b&&(d=b,b=d.handler);this.each(function(c,e){g.each(a,function(c,a){l(e,a,b,d)})});return this};h.prototype.off=function(c,b){const a=c.match(/\S+/g)||[];this.each(function(c,d){g.each(a,function(c,a){k(d,a,b)})});return this};h.prototype.reset=function(){this.each(function(c,b){e(b)});return this};h.prototype.isEmpty=function(){return 0===this._selection[0].innerHTML.replace(/\s/g,"").length};
// h.prototype.position=function(){return null!=this._selection[0]?g.getPosition(this._selection[0]):{x:-1,y:-1,visible:!1}};h.prototype.css=function(c,b){const a=this;if("object"===typeof c)g.each(c,function(c,b){a.each(function(a,d){d.style[c]=b})});else{if(d.isNoU(b))return this._selection[0].style[c];a.each(function(a,d){d.style[c]=b})}return this};h.prototype.addClass=function(c){const b=c.match(/\S+/g)||[];g.each(this._selection,function(a,d){d.classList?g.each(b,function(c,b){d.classList.add(b)}):
// d.className+=" "+c});return this};h.prototype.hasClass=function(c){return g.hasClass(this._selection[0],c)};h.prototype.removeClass=function(c){const b=c.match(/\S+/g)||[];g.each(this._selection,function(a,d){d.classList?g.each(b,function(c,b){d.classList.remove(b)}):d.className=d.className.replace(new RegExp("(^|\\b)"+c.split(" ").join("|")+"(\\b|$)","gi")," ")});return this};h.prototype.prev=function(){return new h(this._selection[0].previousElementSibling)};h.prototype.next=function(){return new h(this._selection[0].nextElementSibling)};
// h.prototype.html=function(c){if(d.isNoU(c))return this._selection[0].innerHTML;this.each(function(b,a){a.innerHTML=c});return this};h.prototype.checked=function(c){if(d.isNoU(c)){const c=this._selection[0].checked;return null!=c&&"false"!=c&&(c||"checked"==c)}this.each(function(b,a){a.checked=c});return this};h.prototype.value=function(c){if(d.isNoU(c))return this._selection[0].value;this.each(function(b,a){a.value=c});return this};h.prototype.append=function(c){"string"===typeof c?this._selection[0].innerHTML+=
// c:this._selection[0].appendChild(c);return this};h.prototype.insert=function(c,b){c=this.children().get(c);null!==c?this._selection[0].insertBefore(b,c):this._selection[0].appendChild(b);return this};h.prototype.prepend=function(c){"string"===typeof c?this._selection[0].innerHTML=c+this._selection[0].innerHTML:this._selection[0].insertBefore(c,this._selection[0].firstElementChild);return this};h.prototype.detach=function(){const c=this._selection[0],a=c.parentNode;null!=a&&(c.__zuix_oldParent=a,c.__zuix_oldIndex=
// Array.prototype.indexOf.call(a.children,c),a.removeChild(c),b.t("Detached from parent",a,c));return this};h.prototype.attach=function(){const c=this._selection[0];null==c.parentNode&&null!=c.__zuix_oldParent&&(g(c.__zuix_oldParent).insert(c.__zuix_oldIndex,c),c.__zuix_oldParent=null,delete c.__zuix_oldParent,delete c.__zuix_oldIndex);return this};h.prototype.display=function(c){if(d.isNoU(c))return this._selection[0].style.display;g.each(this._selection,function(b,a){a.style.display=c});return this};
// h.prototype.visibility=function(c){if(d.isNoU(c))return this._selection[0].style.visibility;g.each(this._selection,function(b,a){a.style.visibility=c});return this};h.prototype.show=function(c){return this.display(null==c?"":c)};h.prototype.hide=function(){return this.display("none")};const g=function(c){return new h(c)};g.find=function(c){return g().find(c)};g.each=function(c,b){const a=null==c?0:Object.keys(c).length;if(0<a){let d=0;for(let e in c)if(c.hasOwnProperty(e)){let f=c[e];f instanceof
// Element&&(f=g(f));if(!1===b.call(f,e,c[e],f))break;d++;if(d>=a)break}}return this};g.ajax=function(c){let b;b=d.isNoU(c)||d.isNoU(c.url)?c:c.url;const a=new XMLHttpRequest;a.open("GET",b);a.onload=function(){200===a.status?d.isFunction(c.success)&&c.success(a.responseText):d.isFunction(c.error)&&c.error(a);d.isFunction(c.then)&&c.then(a)};a.send();return this};g.hasClass=function(c,b){b=b.match(/\S+/g)||[];let a=!1;g.each(b,function(b,d){if(a=c.classList?c.classList.contains(d):(new RegExp("(^| )"+
// d+"( |$)","gi")).test(c.className))return!1});return a};g.classExists=function(c){c=c.match(/\S+/g)||[];let b=!1;g.each(c,function(c,a){c=document.styleSheets;if(null!=c)for(let d=0;d<c.length;d++)try{const e=c[d].rules||c[d].cssRules;if(null!=e)for(let c=0;c<e.length;c++)if(e[c].selectorText===a){b=!0;break}}catch(q){if("SecurityError"!==q.name&&"InvalidAccessError"!==q.name)throw q;}});return b};g.wrapElement=function(c,b){c=document.createElement(c);"string"===typeof b?c.innerHTML=b:c.appendChild(b);
// return c};g.wrapCss=function(c,a){const d=/(([a-zA-Z0-9\240-\377=:-_\n,.@]+.*){([^{}]|((.*){([^}]+)[}]))*})/g;let e="",f;a=a.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/g,"");do if((f=d.exec(a))&&1<f.length){var k=f[2];if(null!=k&&0<k.length){k=k.replace(/\n/g,"");const b=k.split(",");let a=!1;g.each(b,function(d,f){"."===f.replace(" ","")?e+="\n"+c+" ":"@"===f.trim()[0]?(e+=f+" ",f.trim().toLowerCase().startsWith("@media")&&(a=!0)):e+="\n"+c+"\n"+f+" ";d<b.length-1&&(e+=", ")});a?(k=g.wrapCss(c,f[1].substring(f[2].length).replace(/^{([^\0]*?)}$/,
// "$1")),e+="{\n  "+k+"\n}"):e+=f[1].substring(f[2].length)+"\n"}else b.w("z$.wrapCss was unable to parse rule.",k,f)}while(f);""!==e&&(a=e);return a};g.appendCss=function(c,b,a){const e=document.head||document.getElementsByTagName("head")[0];let f=null;d.isNoU(b)?(b=document.getElementById(a),null!=b&&e.removeChild(b)):e.removeChild(b);"string"===typeof c?(f=document.createElement("style"),f.type="text/css",f.id=a,f.styleSheet?f.styleSheet.cssText=c:f.appendChild(document.createTextNode(c))):c instanceof
// Element&&(f=c);d.isNoU(f)||e.appendChild(f);return f};g.replaceCssVars=function(c,b){const a=new RegExp(/\B\$var\[(.*[^\[\]])]/g);let d="",e=0,f=0,k;for(;k=a.exec(c);){let a=k[0];if(1<k.length){var g=k[1];let c=b;if(0<g.indexOf(".")){g=g.split(".");for(let b=0;b<g.length-1&&(c=c[g[b]],"undefined"!==typeof c);b++);"undefined"!==typeof c&&(a=c[g[g.length-1]],e++)}else"undefined"!==typeof c[g]&&(a=c[g],e++)}d+=c.substr(f,k.index-f)+a;f=k.index+k[0].length}0<e&&(c=d+=c.substr(f));return c};g.replaceBraces=
// function(c,b){const a=new RegExp(/{?{.*?}?}/g);let e="",f=0,k=0;for(var g;g=a.exec(c);){if("string"===typeof g[0]&&(0===g[0].trim().length||0<=g[0].indexOf("\n"))){g=c.substr(k,g.index-k)+g[0];e+=g;k+=g.length;continue}let a=g[0];if("function"===typeof b){const c=b(g[0]);d.isNoU(c)||(a=c,f++)}e+=c.substr(k,g.index-k)+a;k=g.index+g[0].length}return 0<f?e+=c.substr(k):null};g.getClosest=function(c,b){for(;c&&c!==document;c=c.parentNode)if(c.matches(b))return c;return null};g.getPosition=function(c,
// b){var a;{var d=a=0,e=c.getBoundingClientRect();let b=c;for(;b;){if("body"===b.tagName.toLowerCase()){const c=b.scrollTop||document.documentElement.scrollTop;a+=b.offsetLeft-(b.scrollLeft||document.documentElement.scrollLeft)+b.clientLeft;d+=b.offsetTop-c+b.clientTop}else a+=b.offsetLeft-b.scrollLeft+b.clientLeft,d+=b.offsetTop-b.scrollTop+b.clientTop;b=b.offsetParent}a={x:a,y:d,rect:e}}a.visible=!1;e=c.offsetParent;if(null!=e){if(e!==document.body){for(d=e.offsetParent;null!=d&&null!==d.offsetParent&&
// d.offsetHeight===d.scrollHeight;)d=d.offsetParent;null!=d&&(e=d)}d=e.getBoundingClientRect();e===document.body&&(d={x:d.x,y:d.y,width:document.documentElement.offsetWidth||document.documentElement.clientWidth,height:document.documentElement.offsetHeight||document.documentElement.clientHeight,top:0,left:0,right:document.documentElement.clientWidth||document.documentElement.offsetWidth,bottom:document.documentElement.clientHeight||document.documentElement.offsetHeight});null==b&&(b=0);e=c.getBoundingClientRect();
// b=!(e.left-1>d.right-b||e.right+1<d.left+b||e.top-1>d.bottom-b||e.bottom+1<d.top+b);a.visible=b;a.frame={dx:(e.left+e.width/2-d.left)/d.width,dy:(e.top+e.height/2-d.top)/d.height};c=g(c);!b&&c.hasClass("--ui--visible")?(c.removeClass("--ui--visible"),a.event="exit"):b?b&&(c.hasClass("--ui--visible")?a.event="scroll":(a.event="enter",c.addClass("--ui--visible"))):a.event="off-scroll"}return a};g.ZxQuery=h;Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||
// Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(b){b=(this.document||this.ownerDocument).querySelectorAll(b);let c=b.length;for(;0<=--c&&b.item(c)!==this;);return-1<c});(function(){function b(b,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};const a=document.createEvent("CustomEvent");a.initCustomEvent(b,c.bubbles,c.cancelable,c.detail);return a}if("function"===typeof window.CustomEvent)return!1;b.prototype=window.Event.prototype;
// window.CustomEvent=b})();String.prototype.hashCode=function(){let b=0;if(0===this.length)return b;for(let c=0;c<this.length;c++){let a=this.charCodeAt(c);b=(b<<5)-b+a;b|=0}return b};String.prototype.startsWith||(String.prototype.startsWith=function(b,a){return this.substr(!a||0>a?0:+a,b.length)===b});r.exports=g},{"./Logger":2,"./Util.js":4}],6:[function(m,r,x){m=m("./zuix/Zuix.js");"object"===typeof r&&r.exports?r.exports=m.call(this):this.zuix=m.call(this)},{"./zuix/Zuix.js":12}],7:[function(m,
// r,x){r.exports=function(a){return null}},{}],8:[function(m,r,x){function a(b,a,e){h=b;this._options=null;this.contextId=null==a||null==a.contextId?null:a.contextId;this.componentId=null;this.trigger=function(b,a,c){"function"===typeof e&&e(b,a,c)};this.behavior=this._controller=this._style=this._css=this._view=this._model=this._container=null;this._eventMap=[];this._behaviorMap=[];this._c=null;this.options(a);return this}const l=m("../helpers/Logger")("ComponentContext.js"),k=m("./OptionAttributes")(),
// f=m("../helpers/ZxQuery"),e=m("../helpers/Util");let h=null;a.prototype.container=function(b){if(null==b)return this._container;b instanceof f.ZxQuery&&(b=b.get());this._container=b;return this};a.prototype.view=function(b){if("undefined"===typeof b)return this._view;b instanceof f.ZxQuery&&(b=b.get());l.t(this.componentId,"view:attach","timer:view:start");if("string"===typeof b){b={content:b};this.trigger(this,"html:parse",b);b=b.content;const a=f.wrapElement("div",b);null!=a.firstElementChild&&
// (null!=a.firstElementChild.getAttribute(k.dataUiView)?1===a.children.length&&(b=a.firstElementChild.innerHTML):b=a.innerHTML);null!=this._container?(this._view=this._container,this._view.innerHTML+=b):null!=this._view?this._view.innerHTML=b:this._view=a;f(this._view).find("script").each(function(b,a){"true"!==this.attr("zuix-loaded")&&(this.attr("zuix-loaded","true"),eval.call(window,a.innerHTML))});this.trigger(this,"view:process",f(this._view))}else b instanceof f.ZxQuery&&(b=b.get()),null!=this._container?
// (this._view=f.wrapElement("div",b.outerHTML).firstElementChild,this._view.removeAttribute(k.dataUiView),this._container.appendChild(this._view),this._view=this._container):this._view=b;b=f(this._view);!1===this._options.css?b.addClass("zuix-css-ignore"):b.removeClass("zuix-css-ignore");b.find("["+k.dataUiLoad+"]").each(function(b,a){this.attr(k.dataUiLoaded,"false")});this.modelToView();l.t(this.componentId,"view:attach","timer:view:stop");return this};a.prototype.style=function(b){if("undefined"===
// typeof b)return this._style;l.t(this.componentId,"view:style","timer:view:start");null==b||b instanceof Element?(this._css=b instanceof Element?b.innerText:b,this._style=f.appendCss(b,this._style,this.componentId)):"string"===typeof b&&(this._css=b,b={content:b},this.trigger(this,"css:parse",b),b=b.content,b=f.wrapCss("["+k.dataUiComponent+'="'+this.componentId+'"]:not(.zuix-css-ignore)',b),this._style=f.appendCss(b,this._style,this.componentId));l.t(this.componentId,"view:style","timer:view:stop");
// return this};a.prototype.model=function(b){if("undefined"===typeof b)return this._model;this._model=b;this.modelToView();null!=this._c&&e.isFunction(this._c.update)&&this._c.update.call(this._c,this._c);return this};a.prototype.controller=function(b){if("undefined"===typeof b)return this._controller;this._controller=b;return this};a.prototype.options=function(b){if(null==b)return this._options;const a=this._options=this._options||{};f.each(b,function(b,d){a[b]=d});null!=a.componentId&&(this.componentId=
// a.componentId);this.container(a.container);this.view(a.view);"undefined"!==typeof a.css&&this.style(a.css);this.controller(a.controller);this.model(a.model);return this};a.prototype.on=function(b,a){this._c.on(b,a);return this};a.prototype.loadCss=function(b,a){const d=this;e.isNoU(b)&&(b={});e.isNoU(b.caching)||(a=b.caching);let k=d.componentId+".css";e.isNoU(b.path)||(k=b.path);a||(k+="?"+(new Date).getTime());f.ajax({url:h.getResourcePath(k),success:function(a){d.style(a);e.isFunction(b.success)&&
// b.success.call(d,a,d)},error:function(a){l.e(a,d);e.isFunction(b.error)&&b.error.call(d,a,d)},then:function(){e.isFunction(b.then)&&b.then.call(d,d)}});return this};a.prototype.loadHtml=function(b,a){const d=this;let m=d.componentId;e.isNoU(b)&&(b={});e.isNoU(b.caching)||(a=b.caching);e.isNoU(b.path)||(m=b.path);var g=h.store("zuix.inlineViews");null==g&&(g=[],h.store("zuix.inlineViews",g));if(null!=g[m])d.view(g[m]),e.isFunction(b.success)&&b.success.call(d,g[m],d),e.isFunction(b.then)&&b.then.call(d,
// d);else{const c=f().find("["+k.dataUiView+'="'+m+'"]:not(['+k.dataUiComponent+'*=""])');0<c.length()?(a=c.get(0),g[m]=a.innerHTML,d.view()===a||null!=d.container()&&d.container().contains(a)?(c.attr(k.dataUiView,null),d._view=a,this.trigger(this,"view:process",f(d.view()))):d.view(a.innerHTML),e.isFunction(b.success)&&b.success.call(d,a.innerHTML,d),e.isFunction(b.then)&&b.then.call(d,d)):(g=e.isNoU(b.cext)?".html":b.cext,m==d.componentId&&(m+=g+(a?"":"?"+(new Date).getTime())),f.ajax({url:h.getResourcePath(m),
// success:function(a){d.view(a);e.isFunction(b.success)&&b.success.call(d,a,d)},error:function(a){l.e(a,d);e.isFunction(b.error)&&b.error.call(d,a,d)},then:function(){e.isFunction(b.then)&&b.then.call(d,d)}}))}return this};a.prototype.viewToModel=function(){l.t(this.componentId,"view:model","timer:vm:start");const b=this;this._model={};f(this._view).find("["+k.dataUiField+"]").each(function(a,f){if(0<this.parent("pre,code").length())return!0;a=this.attr(k.dataUiField);f=!e.isNoU(f.innerHTML)&&e.isIE()?
// f.cloneNode(!0):f;if(0<a.indexOf(".")){a=a.split(".");let d=b._model;for(let b=0;b<a.length-1;b++)"undefined"===typeof d[a[b]]&&(d[a[b]]={}),d=d[a[b]];d[a[a.length-1]]=f}else b._model[a]=f});l.t(this.componentId,"view:model","timer:vm:stop");return this};a.prototype.modelToView=function(){l.t(this.componentId,"model:view","timer:mv:start");if(null!=this._view&&null!=this._model){const a=this;f(this._view).find("["+k.dataUiField+"]").each(function(b,h){if(0<this.parent("pre,code").length())return!0;
// var d=this.attr(k.dataBindTo);null==d&&(d=this.attr(k.dataUiField));var g=f(a._view);if("function"===typeof a._model)a._model.call(g,this,d,g);else if(b=e.propertyFromPath(a._model,d),"function"===typeof b)b.call(g,this,d,g);else if(null!=b)switch(h.tagName.toLowerCase()){case "img":h.src=e.isNoU(b.src)?e.isNoU(b.innerHTML)?b:b.innerHTML:b.src;b.alt&&(h.alt=b.alt);break;case "a":h.href=e.isNoU(b.href)?e.isNoU(b.innerHTML)?b:b.innerHTML:b.getAttribute("href");b.title&&(h.title=b.title);e.isNoU(b.href)||
// e.isNoU(b.innerHTML)||""===b.innerHTML.trim()||(h.innerHTML=b.innerHTML);break;case "input":h.value=e.isNoU(b.value)?e.isNoU(b.innerHTML)?b:b.innerHTML:b.value;break;default:if(h.innerHTML=e.isNoU(b.innerHTML)?b:b.innerHTML,null!=b.attributes)for(d=0;d<b.attributes.length;d++)g=b.attributes[d],g.specified&&g.name!==k.dataUiField&&("+"===g.value[0]&&h.hasAttribute(g.name)&&(g.value=h.getAttribute(g.name)+" "+g.value.substring(1)),h.setAttribute(g.name,g.value))}})}l.t(this.componentId,"model:view",
// "timer:mv:stop");return this};r.exports=a},{"../helpers/Logger":2,"../helpers/Util":4,"../helpers/ZxQuery":5,"./OptionAttributes":11}],9:[function(m,r,x){function a(){}function l(b,a){null!=b&&(H=!b);null!=a&&(J=a);return!D&&!H}function k(b){null==b&&(b=document);F.indexOf(b)||F.push(b)}function f(b){for(let a=0;a<y.length;a++){const c=y[a];if(c.element===b)return c.waiting}return null}function e(b){null==b&&0<F.length&&(b=F.unshift());b instanceof u.ZxQuery&&(b=b.get());f(b);var a=u(b).find("["+
// t.dataUiLoad+"]:not(["+t.dataUiLoaded+"]),["+t.dataUiInclude+"]:not(["+t.dataUiLoaded+"])");a=Array.prototype.slice.call(a._selection);y.push({element:b,waiting:a});b=[];for(var c=0;c<a.length;c++){var d=a[c],n=parseInt(d.getAttribute(t.dataUiPriority));isNaN(n)&&(n=0);let f=0;var e=d.parentNode;let Q=!1;for(;null!=e&&e!==document;){f++;if(null!=e.getAttribute(t.dataUiView)){Q=!0;break}e=e.parentNode}Q||(e=new A,e.element=d,e.priority=n+1E3*f,b.push(e))}a=0;for(c=0;c<b.length;c++){d=!1;for(n=0;n<
// w.length;n++)if(b[c].element===w[n].element){d=!0;break}d||(d=b[c].element,n=d.getAttribute(t.dataUiOptions),z(d,n),w.push(b[c]),a++)}q.t("componentize:count",w.length,a);(0===a||0===F.length&&0===w.length)&&E.trigger(this,"componentize:end")}function h(){w.sort(function(b,a){return b.priority-a.priority});let b=null,a=0<w.length?w.shift():null;for(;null!=a&&null!=a.element;){const c=N(a.element);l()&&c?(a.lazy=!0,a.visible=u.getPosition(a.element,J).visible):(a.lazy=!1,a.visible=!0);if(null!=a&&
// null!=a.element&&a.visible){b={item:a,cancelable:a.lazy};break}if(0<w.length)a=w.shift();else break}return b}function b(b){e(b);b=h();null!=b&&K.append([b])}function d(a){var c=u(a);if(null!=c.attr(t.dataUiLoaded)||0<c.parent("pre,code").length())return!1;c.attr(t.dataUiLoaded,"true");let d=c.attr(t.dataUiOptions);p.isNoU(d)?d={}:(d=p.propertyFromPath(window,d),d=p.cloneObject(d)||{});var e=c.attr(t.dataUiContext);if(!p.isNoU(e)){var n=E.context(e);null!==n&&(d=n.options());d.contextId=e}p.isNoU(d.view)&&
// !c.isEmpty()?(d.view=a,d.viewDeferred=!0):p.isNoU(d.view)&&p.isNoU(d.container)&&c.isEmpty()&&(d.container=a);e=c.attr(t.dataUiLoad);if(p.isNoU(e))if(e=c.attr(t.dataUiInclude),null!=e)e=B(e),c.attr(t.dataUiInclude,e),c.attr(t.dataUiComponent,e),p.isNoU(d.controller)&&(d.controller=function(){});else return!1;else e=B(e),c.attr(t.dataUiLoad,e);n=c.attr(t.dataBindModel);!p.isNoU(n)&&0<n.length&&(d.model=p.propertyFromPath(window,n));c=c.attr(t.dataUiPriority);p.isNoU(c)||(d.priority=parseInt(c));u(a).one("component:ready",
// function(){k(a);b(a)});E.load(e,d);return!0}function B(b){var a=E.store("config");null!=a&&null!=a[location.host]&&(a=a[location.host]);a=null!=a&&null!=a.libraryPath?a.libraryPath:"https://zuixjs.github.io/zkit/lib/";b.startsWith("@lib/")&&(b=a+b.substring(5));return b}function z(b,a){"string"===typeof a&&(a=p.propertyFromPath(window,a));null!=b&&null!=a&&(null!=a.lazyLoad&&b.setAttribute(t.dataUiLazyload,a.lazyLoad.toString().toLowerCase()),null!=a.contextId&&b.setAttribute(t.dataUiContext,a.contextId.toString().toLowerCase()),
// null!=a.componentId&&b.setAttribute(t.dataUiLoad,a.componentId.toString().toLowerCase()))}function g(b){for(let a=0;a<M.length;a++){const c=M[a];if(c.element===b)return c}return null}function c(b){b={element:b};M.push(b);return b}function C(b){for(let a=0;a<v.length;a++){const c=v[a];if(c.element===b)return c}return null}function L(b){b={element:b};v.push(b);return b}function N(a){if("false"===a.getAttribute(t.dataUiLazyload))return!1;let d=g(a);if(null==d){const e=u.getClosest(a.parentNode,"["+t.dataUiLazyload+
// "=scroll],["+t.dataUiLazyload+"=true]");if(null!=e)return d=c(a),a=C(e),null==a&&(a=L(e),"scroll"===e.getAttribute(t.dataUiLazyload)&&function(a,c){let n=(new Date).getTime();u(c===document.body?window:c).on("scroll",function(){const a=(new Date).getTime();100<a-n&&(n=a,b(c))})}(this,e)),!0;if("true"===a.getAttribute(t.dataUiLazyload))return d=c(a),!0}else return!0;return!1}const t=m("./OptionAttributes")();a.prototype.componentize=function(a,c){E.trigger(this,"componentize:begin");if(null!=c){const b=
// f(a);null==b?y.push({element:a,waiting:[c]}):b.push(c)}else k(a);b(a);return this};a.prototype.applyOptions=function(a,b){z(a,b);return this};a.prototype.resolvePath=function(a){return B(a)};a.prototype.willLoadMore=function(){return 0<w.length||0<F.length};a.prototype.lazyLoad=function(a,b){return l(a,b)};a.prototype.dequeue=function(a){for(let b=0;b<w.length;b++)if(w[b].element===a){w.splice(b,1);break}};a.prototype.setHost=function(a){E=a;return this};r.exports=function(){return new a};const q=
// m("../helpers/Logger")("ComponentContext.js"),p=m("../helpers/Util"),u=m("../helpers/ZxQuery"),F=[],w=[],M=[],v=[],A=function(){return{element:null,priority:0,visible:!0,lazy:!1}},K=m("./../helpers/AsynChain")({doWork:function(a,b){u(a.element).one("component:ready",function(){b()});return d(a.element)},willBreak:function(){return!1},status:function(a){switch(a){case "done":b()}}});let H=!1,J=1,E=null,D=!1;navigator&&navigator.userAgent&&(D=(new RegExp(/bot|googlebot|crawler|spider|robot|crawling/i)).test(navigator.userAgent));
// D&&q.d(navigator.userAgent,"is a bot, ignoring `lazy-loading` option.");const y=[]},{"../helpers/Logger":2,"../helpers/Util":4,"../helpers/ZxQuery":5,"./../helpers/AsynChain":1,"./OptionAttributes":11}],10:[function(m,r,x){function a(a){const f=this;this._view=null;this.context=a;this._fieldCache=[];this.destroy=this.update=this.create=this.init=null;this._childNodes=[];this.saveView=function(){this.restoreView();this.view().children().each(function(a,d){f._childNodes.push(d)})};this.restoreView=
// function(){0<this._childNodes.length&&(f.view().html(""),l.each(f._childNodes,function(a,d){f.view().append(d)}),this._childNodes.length=0)};this.on=function(a,d){this.addEvent(a,d);return this};this.mapEvent=function(a,d,e,f){null!=d&&(d.off(e,this.eventRouter),a[e]=f,d.on(e,this.eventRouter))};this.eventRouter=function(b){const d=f.view();"function"===typeof a._behaviorMap[b.type]&&a._behaviorMap[b.type].call(d,b,b.detail,d);"function"===typeof a._eventMap[b.type]&&a._eventMap[b.type].call(d,b,
// b.detail,d)};const e=a.options();let k=null;if(null!=e.on)for(let a in e.on)e.on.hasOwnProperty(a)&&(k=e.on[a],f.addEvent(a,k));if(null!=e.behavior)for(let a in e.behavior)e.behavior.hasOwnProperty(a)&&(k=e.behavior[a],f.addBehavior(a,k));a.controller().call(this,this);return this}const l=m("../helpers/ZxQuery");a.prototype.addEvent=function(a,f){this.mapEvent(this.context._eventMap,this.view(),a,f);return this};a.prototype.addBehavior=function(a,f){this.mapEvent(this.context._behaviorMap,this.view(),
// a,f);return this};a.prototype.field=function(a){return null};a.prototype.clearCache=function(){this._fieldCache.length=0};a.prototype.view=function(a){if(null!=this.context.view()||this._view!==this.context.view())this.clearCache(),this._view=l(this.context.view());if(null!=a)return this._view.find(a);if(null!==this._view)return this._view;throw Error("Not attached to a view yet.");};a.prototype.model=function(a){if(null==a)return this.context.model();this.context.model(a);return this};a.prototype.options=
// function(){return this.context.options()};a.prototype.trigger=function(a,f,e){null==this.context._eventMap[a]&&!0!==e&&this.addEvent(a,null);!0===e?(e=this.context.container(),null==e&&(e=this.context.view()),null!=e&&l(e).trigger(a,f),this.context.trigger(this.context,a,f)):this.view().trigger(a,f);return this};a.prototype.expose=function(a,f){if("object"===typeof a){const e=this;l.each(a,function(a,b){e.context[a]=b})}else this.context[a]=f;return this};a.prototype.loadCss=function(a){this.context.loadCss(a);
// return this};a.prototype.loadHtml=function(a){this.saveView();this.context.loadHtml(a);return this};a.prototype.log={};a.prototype.for=function(a){return this};r.exports=a},{"../helpers/ZxQuery":5}],11:[function(m,r,x){const a=Object.freeze({dataBindModel:"data-bind-model",dataBindTo:"data-bind-to",dataUiComponent:"data-ui-component",dataUiContext:"data-ui-context",dataUiField:"data-ui-field",dataUiInclude:"data-ui-include",dataUiLazyload:"data-ui-lazyload",dataUiLoad:"data-ui-load",dataUiLoaded:"data-ui-loaded",
// dataUiOptions:"data-ui-options",dataUiPriority:"data-ui-priority",dataUiView:"data-ui-view",zuixLoaded:"zuix-loaded"});r.exports=function(l){return a}},{}],12:[function(m,r,x){function a(){v.setHost(this);this._store=[];this._fieldCache=[];return this}function l(a){"function"!==typeof a["for"]&&(a["for"]=function(b){return J[b]=a});return a}function k(a,b,c){p.isNoU(c)&&(c=this);null==c._fieldCache&&(c._fieldCache={});let n=null;if("undefined"===typeof c._fieldCache[a]){if(n=u(b).find("["+A.dataUiField+
// '="'+a+'"]'),null!=n&&0<n.length()&&(c._fieldCache[a]=n,1===n.length()&&p.isNoU(n.field))){const a=this;n.field=function(b){return a.field(b,n,n)}}}else n=c._fieldCache[a];return n}function f(a){let b=zuix.store("config");null!=b&&null!=b[location.host]&&(b=b[location.host]);a=v.resolvePath(a);!a.startsWith("//")&&0>a.indexOf("://")&&(a=(null!=b&&null!=b.resourcePath?b.resourcePath:"")+a);return a}function e(a,b){let n=g(a.componentId);null!==n&&null==b.controller&&null==a.controller()&&(a.controller(n.controller),
// q.t(a.componentId+":js","component:cached:js"));if(p.isNoU(b.view)){if(null!==n&&(null!=n.view&&(a.view(n.view),q.t(a.componentId+":html","component:cached:html")),!1!==b.css&&(b.css=!1,n.css_applied||(n.css_applied=!0,a.style(n.css),q.t(a.componentId+":css","component:cached:css")))),p.isNoU(a.view()))return O("resource-loader").queue(a.componentId+":html",function(){y[a.componentId]=this;a.loadHtml({cext:b.cext,caching:I,success:function(d){null==n&&(n=C(a));n.view=d;delete n.controller;!1!==b.css?
// (y[a.componentId].step(a.componentId+":css"),a.loadCss({caching:I,success:function(a){n.css=a},error:function(b){q.e(b,a)},then:function(){c(a,y[a.componentId])}})):c(a,y[a.componentId])},error:function(c){q.e(c,a);p.isFunction(b.error)&&a.error.call(a,c,a)}})},b.priority),a}else a.view(b.view);null==a.controller()?O("resource-loader").queue(a.componentId+":js",function(){y[a.componentId]=this;c(a,y[a.componentId])},K.length):c(a);return a}function h(a){if(a instanceof Element){const b=a;a=zuix.context(b);
// v.dequeue(b)}p.isNoU(a)||(p.isNoU(a._c)||(p.isNoU(a._c.view())||(a._c.view().attr(A.dataUiComponent,null),a._c.view().reset(),p.isNoU(a._c._fieldCache)||u.each(a._c._fieldCache,function(a,b){b.reset()}),a._c.view().detach()),p.isFunction(a._c.destroy)&&a._c.destroy.call(a,a)),a=a.container(),null!=a&&null!=a.parentNode&&a.parentNode.removeChild(a))}function b(a){a=new w(zuix,a,B);K.push(a);return a}function d(a,b){let c=null;if(a instanceof u.ZxQuery)a=a.get();else if("string"===typeof a){const b=
// u.find("["+A.dataUiContext+'="'+a+'"]');0<b.length()&&(a=b.get())}u.each(K,function(b,d){if(a instanceof Element&&(d.view()===a||d.container()===a)||p.objectEquals(d.contextId,a))return c=d,!1});if("function"===typeof b&&(a instanceof Element||a instanceof u.ZxQuery))if(null==c)u(a).one("component:ready",function(){c=zuix.context(this);b.call(c,c)});else b.call(c,c);return c}function B(a,b,c){p.isFunction(H[b])&&H[b].call(a,c,a)}function z(a){null!=a&&(I=a);return I}function g(a){let b=null;u.each(G,
// function(c,d){if(p.objectEquals(d.componentId,a))return b=d,!1});return b}function c(a,b){if("undefined"===typeof a.options().controller&&null===a.controller())if(q.d(a.componentId,"controller:load"),p.isNoU(b)||b.step(a.componentId+":js"),p.isFunction(J[a.componentId]))a.controller(J[a.componentId]),L(a,b);else{const c=function(b){const c=a.componentId+".js"+(I?"":"?"+(new Date).getTime());u.ajax({url:f(c),success:function(b){try{const c=b.indexOf("function"),d=b.indexOf(".load");1<d&&d<c&&(b=b.substring(0,
// d-4));const e=b.indexOf(".controller");1<e&&e<c&&(b=b.substring(e+11));const n=b.indexOf("//<--controller");0<n&&(b=b.substring(0,n));b+='\n//# sourceURL="'+a.componentId+'.js"\n';a.controller(t(b))}catch(R){q.e(Error(),R,b,a),p.isFunction(a.error)&&a.error.call(a,R,a)}},error:function(b){q.e(b,Error(),a);p.isFunction(a.error)&&a.error.call(a,b,a)},then:function(){L(a,b)}})};p.isNoU(b)?O("resource-loader").queue(a.componentId+":js",function(){c(y[a.componentId]=this)},a.options().priority):c(b)}else L(a,
// b)}function C(a){var b=a.view().innerHTML;b=u.wrapElement("div",b);b={componentId:a.componentId,view:b.innerHTML,css:a._css,controller:a.controller()};G.push(b);q.t(a.componentId,"bundle:added");return b}function L(a,b){y[a.componentId]=null;if(p.isNoU(a.view()))q.e(a.componentId,"component:view:undefined");else{let d=g(a.componentId);a.options().viewDeferred?q.w(a.componentId,"component:deferred:load"):null===d?d=C(a):null==d.controller&&(d.controller=a.controller());null!=b&&b.callback(function(){q.d(a.componentId,
// "controller:create:deferred");N(a._c)});var c=u(a.view());null==c.attr(A.dataUiContext)&&c.attr(A.dataUiContext,a.contextId);q.d(a.componentId,"component:initializing");if(p.isFunction(a.controller())){c=a._c=new M(a);c.log=m("../helpers/Logger")(a.contextId);"function"===typeof c.init&&c.init();if(!p.isNoU(c.view()))if(null==c.view().attr(A.dataUiComponent)&&c.view().attr(A.dataUiComponent,a.componentId),p.isNoU(a.model())&&!p.isNoU(a.view())&&a.viewToModel(),c.trigger("view:apply"),a.options().viewDeferred){a.options().viewDeferred=
// !1;c.saveView();null===d&&(d={componentId:a.componentId,controller:a.controller()},G.push(d),q.t(a.componentId,"bundle:added"),q.d(a.componentId,"component:deferred:load"));let e=-1;!1!==a.options().css&&(null==d.css?(-1===e&&(e=0),e++,a.loadCss({caching:I,success:function(b){null==d.css&&(d.css=b);q.d(a.componentId,"component:deferred:css",e)},then:function(){0===--e&&null!=b&&b.end()}})):a.style(d.css));!1!==a.options().html&&(null==d.view?(-1===e&&(e=0),e++,a.loadHtml({cext:a.options().cext,caching:I,
// success:function(b){null==d.view&&(d.view=b);q.d(a.componentId,"component:deferred:html",e)},error:function(b){q.e(b,a);p.isFunction(a.options().error)&&a.options().error.call(a,b,a)},then:function(){0===--e&&null!=b&&b.end()}})):a.view(d.view));-1===e&&null!=b&&b.end()}else null!=b&&b.end();null==b&&(q.d(a.componentId,"controller:create"),N(c))}else q.w(a.componentId,"component:controller:undefined")}}function N(a){q.t(a.context.componentId,"controller:init","timer:init:start");a.view().find("["+
// A.dataUiLoaded+'="false"]:not(['+A.dataUiComponent+"])").each(function(a,b){this.attr(A.dataUiLoaded,null)});a.field=function(b){b=k(b,a.view(),a);b.on=function(b,c,d,e){if("string"===typeof c){const b=c;c=function(){a.trigger(b,d,e)}}return u.ZxQuery.prototype.on.call(this,b,c)};return b};p.isFunction(a.create)&&a.create();a.trigger("view:create");p.isFunction(a.context.ready)&&a.context.ready.call(a.context,a.context);a.trigger("component:ready",a.view(),!0);q.t(a.context.componentId,"controller:init",
// "timer:init:stop");q.i(a.context.componentId,"component:loaded",a.context.contextId);if(null!=D[a.context.componentId]){const b=D[a.context.componentId];D[a.context.componentId]=null;let c;for(;null!=b&&null!=(c=b.shift());)e(c.c,c.o)}zuix.componentize(a.view())}function t(a){let b=function(a){};if("string"===typeof a)try{b=eval.call(this,a)}catch(S){q.e(this,S,a)}return b}const q=m("../helpers/Logger")("Zuix.js"),p=m("../helpers/Util"),u=m("../helpers/ZxQuery"),F=m("../helpers/TaskQueue"),w=m("./ComponentContext"),
// M=m("./ContextController"),v=m("./Componentizer")(),A=m("./OptionAttributes")();m("./ComponentCache");const K=[],H=[],J={},E=[],D={},y=[],O=function(a){p.isNoU(E[a])&&(E[a]=new F(function(a,b,c){B(a,b,c)}));return E[a]};let G=[],P=0,I=!0;a.prototype.field=function(a,b){return k.call(this,a,b)};a.prototype.load=function(a,c){{a=v.resolvePath(a);let f;p.isNoU(c)?(c={},f=new w(zuix,c,B)):(c.componentId=a,p.isNoU(c.contextId)?(!1===c&&(c={}),c.contextId="zuix-ctx-"+ ++P,f=b(c)):(f=d(c.contextId),null!==
// f?f.options(c):f=b(c)));f.componentId!=a&&(f.componentId=a);p.isFunction(c.ready)&&(f.ready=c.ready);p.isFunction(c.error)&&(f.error=c.error);null==y[a]?(y[a]=!0,c=e(f,c)):(null==D[a]&&(D[a]=[]),D[a].push({c:f,o:c}),c=f)}return c};a.prototype.unload=function(a){h(a);return this};a.prototype.controller=function(a){return l.call(this,a)};a.prototype.context=function(a,b){return d.call(this,a,b)};a.prototype.createComponent=function(a,c){null==c&&(c={});p.isNoU(c.contextId)&&(c.contextId="zuix-ctx-"+
// ++P);if(null!=d(c.contextId))throw Error("Context arelady exists.");c.container=document.createElement("div");c.componentId=a;v.applyOptions(c.container,c);return b(c)};a.prototype.trigger=function(a,b,c){B(a,b,c);return this};a.prototype.hook=function(a,b){p.isNoU(b)?delete H[a]:H[a]=b;return this};a.prototype.using=function(a,b,c){b=v.resolvePath(b);a=a.toLowerCase();const e=a+"-"+b.hashCode();if("component"===a)a=d(e),null==a?zuix.load(b,{contextId:e,view:"",priority:-10,ready:function(a){"function"===
// typeof c&&c(b,a)},error:function(){c(b,null)}}):"function"===typeof c&&c(b,a);else{const d="style"===a;if(0===u.find(a+'[id="'+e+'"]').length()){const f=document.head||document.getElementsByTagName("head")[0],h=document.createElement(a);h.type=d?"text/css":"text/javascript";h.id=e;f.appendChild(h);const k=function(a){d?h.styleSheet?h.styleSheet.cssText=a:h.appendChild(document.createTextNode(a)):h.innerText?h.innerText=a:h.appendChild(document.createTextNode(a));c&&c(b,e)},n="_res/"+a+"/"+e;a=g(n);
// null!=a?k(d?a.css:a.controller):u.ajax({url:b,success:function(a){G.push({componentId:n,view:null,css:d?a:null,controller:d?null:a,using:b});k(a)},error:function(){f.removeChild(h);c&&c(b)}})}else console.log("Resource already added "+e+"("+b+")"),c&&c(b,e)}};a.prototype.lazyLoad=function(a,b){if(null!=a)v.lazyLoad(a,b);else return v.lazyLoad();return this};a.prototype.httpCaching=function(a){if(null!=a)z(a);else return z();return this};a.prototype.componentize=function(a){v.componentize(a);return this};
// a.prototype.store=function(a,b){null!=b&&(this._store[a]=b);return this._store[a]};a.prototype.getResourcePath=function(a){return f(a)};a.prototype.bundle=function(a,b){if(p.isNoU(a))return G;if(a&&"boolean"===typeof a){q.t("bundle:start");const c=v.lazyLoad();v.lazyLoad(!1);v.componentize();"function"===typeof b&&(a=function(a){setTimeout(function(){v.willLoadMore()?(q.t("bundle:wait"),a(a)):(q.t("bundle:end"),v.lazyLoad(c),b())},1E3)},a(a))}else{for(let b=0;b<a.length;b++)a[b].css_applied&&delete a[b].css_applied,
// "string"===typeof a[b].controller&&(a[b].controller=eval(a[b].controller));G=a}return this};a.prototype.$=u;a.prototype.TaskQueue=F;a.prototype.ZxQuery=u.ZxQuery;a.prototype.dumpCache=function(){return G};a.prototype.dumpContexts=function(){return K};r.exports=function(b){const c=new a;"loading"!=document.readyState?c.componentize():document.addEventListener("DOMContentLoaded",function(){c.componentize()});q.monitor(function(a,b){p.isFunction(c.monitor)&&c.monitor(a,Array.prototype.slice.call(b))});
// return c}},{"../helpers/Logger":2,"../helpers/TaskQueue":3,"../helpers/Util":4,"../helpers/ZxQuery":5,"./ComponentCache":7,"./ComponentContext":8,"./Componentizer":9,"./ContextController":10,"./OptionAttributes":11}]},{},[6])(6)});
// //# sourceMappingURL=zuix.min.js.map


function setupLiveReader(t){var e=$('<button class="uk-button uk-button-primary uk-width-1-1" onclick="stopBarcodeReader()">Close</button>'),n=document.createElement("div");n.style.position="absolute",n.style.zIndex="999",n.style.width="100%",n.style.height="100%",n.style.left="0",n.style.top="0",n.style.background="rgba(71, 76, 85, .5)",n.id="barcode-reader";var o=document.createElement("canvas"),i=document.createElement("video"),r=o.getContext("2d");o.style.position="absolute",n.appendChild(e[0]),n.appendChild(o),document.body.appendChild(n);navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then(function(e){window.currentStream=e.getTracks()[0],i.width=320,BarcodeScanner.init(),BarcodeScanner.streamCallback=function(e){console.log("barcode detected, stream will stop"),t.value=e[0].Value,BarcodeScanner.StopStreamDecode(),stopBarcodeReader()},i.setAttribute("autoplay",""),i.setAttribute("playsinline",""),i.setAttribute("style","width: 100%"),i.srcObject=e,n.appendChild(i),i.onloadedmetadata=function(t){var e=50,n=20,c=200,a=30,s=i.getBoundingClientRect();o.style.height=s.height+"px",o.style.width=s.width+"px",o.style.top=s.top+"px",o.style.left=s.left+"px";r.fillStyle="rgba(71, 76, 85, .5)",r.fillRect(0,0,s.width,s.height),r.clearRect(e,n,c,a),r.strokeStyle="#fdd740",r.strokeRect(e,n,c,a),i.play(),BarcodeScanner.DecodeStream(i)}}).catch(function(t){console.log(t)})}function stopBarcodeReader(){var t=document.getElementById("barcode-reader");document.body.removeChild(t),window.currentStream.stop()}!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).zuix=t()}}(function(){var define,module,exports;return function(){return function t(e,n,o){function i(c,a){if(!n[c]){if(!e[c]){var s="function"==typeof require&&require;if(!a&&s)return s(c,!0);if(r)return r(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[c]={exports:{}};e[c][0].call(u.exports,function(t){return i(e[c][1][t]||t)},u,u.exports,t,e,n,o)}return n[c].exports}for(var r="function"==typeof require&&require,c=0;c<o.length;c++)i(o[c]);return i}}()({1:[function(t,e,n){"use strict";function o(t){c=t}o.prototype.isReady=function(){return 0===i.length||-1===r},o.prototype.getJobs=function(){return i},o.prototype.setJobs=function(t){if(i.length>0)return r=-1,void(i.length=0);i=t.slice(),c.status("start",i),s()},o.prototype.append=function(t){this.isReady()?this.setJobs(t):Array.prototype.push.apply(i,t)};let i=[],r=-1,c=null,a=null;function s(){return u(),++r<i.length&&!c.willBreak()?(function(){const t=i[r];if(null==t)return!1;const e=function(){u(),c.doWork(t.item,function(){a=requestAnimationFrame(s)})||s()};if(t.cancelable)if(c.willBreak())l("stopped");else{if(null!=a)return!1;a=requestAnimationFrame(e)}else e()}(),!0):((r>=i.length||c.willBreak())&&l(),!1)}function l(t){r=-1,i.length=0,i=[],c.status(null!=t?t:"done")}function u(){null!==a&&(cancelAnimationFrame(a),a=null)}e.exports=function(t){return new o(t)}},{}],2:[function(t,e,n){"use strict";const o=["log","info","warn","error","debug","trace","dir","group","groupCollapsed","groupEnd","time","timeEnd","profile","profileEnd","dirxml","assert","count","markTimeline","timeStamp","clear"],i="background-color:rgba(200,200,200,0.2);",r="background-color:transparent;",c="color:#8a53ff;",a="color:#777777",s="color:#888888;",l="color:#999900;",u="color:#00aa00;",d="color:#ff0000;",p="color:#ff7700;";let h=null,f=null,m=null;function g(t){h=window?window.console:{},f=window||{},this._timers={},this.args=function(t,e,n){let o="%c "+e+" %c"+(new Date).toISOString()+" %c"+t;const h=[i+c,i+a,i+s];for(let t=0;t<n.length;t++)if("string"==typeof n[t]&&0===n[t].indexOf("timer:")){const e=n[t].split(":");if(3===e.length){let t;switch(e[2]){case"start":this._timers[e[1]]=(new Date).getTime(),o+=" %cSTART "+e[1],h.push(i+l);break;case"stop":t=(new Date).getTime()-this._timers[e[1]],o+=" %cSTOP "+e[1]+" "+t+" ms",t>200?h.push(i+d):t>100?h.push(i+p):h.push(i+u)}}}o+=" \n%c ",h.push(r+"color:inherit;");for(let t=h.length-1;t>=0;t--)Array.prototype.unshift.call(n,h[t]);Array.prototype.unshift.call(n,o),Array.prototype.push.call(n,"\n\n")},this.log=function(e,n){"function"==typeof m&&m.call(t,e,n),f.zuixNoConsoleOutput||(this.args(t,e,n),h.log.apply(h,n))}}g.prototype.monitor=function(t){m=t},g.prototype.console=function(t){if(t)window.console=h;else{window.console={};for(let t=0;t<o.length;t++)window.console[o[t]]||(window.console[o[t]]=function(){})}},g.prototype.i=g.prototype.info=g.prototype.l=g.prototype.log=function(){return this.log("INFO",arguments),this},g.prototype.w=g.prototype.warn=function(){return this.log("WARN",arguments),this},g.prototype.e=g.prototype.error=function(){return this.log("ERROR",arguments),this},g.prototype.d=g.prototype.debug=function(){return this.log("DEBUG",arguments),this},g.prototype.t=g.prototype.trace=function(){return this.log("TRACE",arguments),this},e.exports=function(t){return new g(t)}},{}],3:[function(t,e,n){"use strict";const o=t("./Logger")("TaskQueue.js");function i(t){const e=this;e._worker=null,e._taskList=[],e._requests=[],null==t&&(t=function(){}),e.taskQueue=function(n,i,r){e._taskList.push({tid:n,fn:i,status:0,priority:r,step:function(n){o.t(n,"load:step"),t(e,"load:step",{task:n})},end:function(){this.status=2;o.t(this.tid,"load:next","timer:task:stop"),t(e,"load:next",{task:this.tid}),e._taskList.splice(this.index,1),e.taskCheck(),null!=this._callback&&this._callback.call(this)},callback:function(t){this._callback=t}}),o.t(n,"task added",r,"priority"),e._taskList.sort(function(t,e){return t.priority>e.priority?1:e.priority>t.priority?-1:0}),e.taskCheck()},e.taskCheck=function(){for(let n=0;n<e._taskList.length;n++){if(0===e._taskList[n].status)return e._taskList[n].status=1,o.t(e._taskList[n].tid,"load:begin","timer:task:start"),t(e,"load:begin",{task:e._taskList[n].tid}),e._taskList[n].index=n,void e._taskList[n].fn.call(e._taskList[n]);if(1===e._taskList[n].status)return;if(2===e._taskList[n].status)return}o.t("load:end"),t(e,"load:end")}}i.prototype.callback=function(t){},i.prototype.queue=function(t,e,n){return this.taskQueue(t,e,n)},e.exports=i},{"./Logger":2}],4:[function(t,e,n){"use strict";e.exports={isIE:function(){return window.navigator.userAgent.indexOf("Trident")>0},isNoU:function(t){return null==t},isFunction:function(t){return"function"==typeof t},objectEquals:function(t,e){if(null==t||null==e)return t===e;if(t.constructor!==e.constructor)return!1;if(t instanceof Function)return t===e;if(t instanceof RegExp)return t===e;if(t===e||t.valueOf()===e.valueOf())return!0;if(Array.isArray(t)&&t.length!==e.length)return!1;if(t instanceof Date)return!1;if(!(t instanceof Object))return!1;if(!(e instanceof Object))return!1;const n=Object.keys(t);return Object.keys(e).every(function(t){return-1!==n.indexOf(t)})&&n.every(function(n){return util.objectEquals(t[n],e[n])})},propertyFromPath:function(t,e){if("string"!=typeof e)return;const n=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");let o=t;for(let t=0;t<n.length;++t){const e=n[t];if(void 0===o[e])return;o=o[e]}return o},cloneObject:function t(e){if(null===e||"object"!=typeof e)return e;let n=e;try{n=e.constructor();for(let o in e)e.hasOwnProperty(o)&&(n[o]=t(e[o]))}catch(t){}return n},hasPassiveEvents:function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(t){}return t}}},{}],5:[function(t,e,n){"use strict";const o=t("./Logger")("TaskQueue.js"),i=t("./Util.js");let r=i.hasPassiveEvents();const c=[];function a(t){!function(t,e,n){const o=u(t);u.each(c,function(){this.element===t&&this.path===e&&this.handler.call(o,n,o)})}(this,t.type,t)}function s(t,e,n){let o=1,i=-1;u.each(c,function(r){this.element===t&&this.path===e&&this.handler===n&&(o--,i=r)}),-1!==i&&c.splice(i,1),0===o&&t.removeEventListener(e,a)}function l(t){if(this._selection=[],void 0===t&&(t=document.documentElement),t instanceof l)return t;if(t instanceof HTMLCollection||t instanceof NodeList){const e=this._selection=[];u.each(t,function(t,n){e.push(n)})}else if(Array.isArray(t))this._selection=t;else if(t===window||t instanceof HTMLElement||t instanceof Node)this._selection=[t];else if("string"==typeof t)this._selection=document.documentElement.querySelectorAll(t);else if(null!==t)throw o.e("ZxQuery cannot wrap object of this type.",typeof t,t),new Error("ZxQuery cannot wrap object of this type.");return this}l.prototype.length=function(){return this._selection.length},l.prototype.parent=function(t){return i.isNoU(t)?new l(this._selection[0].parentNode):new l(u.getClosest(this._selection[0],t))},l.prototype.children=function(t){return i.isNoU(t)?new l(this._selection[0].children):new l(this._selection[0].querySelectorAll(t))},l.prototype.reverse=function(){const t=Array.prototype.slice.call(this._selection,0);return this._selection=t.reverse(),this},l.prototype.get=function(t){return i.isNoU(t)&&(t=0),this._selection[t]},l.prototype.eq=function(t){const e=this._selection;let n=e[t];return arguments.length>1&&(n=[],u.each(arguments,function(t,o){null!=e[o]&&n.push(e[o])})),new l(n)},l.prototype.find=function(t){return new l(this._selection[0].querySelectorAll(t))},l.prototype.each=function(t){return u.each(this._selection,t),this},l.prototype.attr=function(t,e){const n=this;if("object"==typeof t)u.each(t,function(t,e){n.each(function(n,o){o.setAttribute(t,e)})});else{if(void 0===e)return this._selection[0].getAttribute(t);null===e?this._selection[0].removeAttribute(t):this.each(function(n,o){this.get().setAttribute(t,e)})}return this},l.prototype.trigger=function(t,e){let n;return window.CustomEvent?n=new CustomEvent(t,{detail:e}):(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,e),this.each(function(t,e){e.dispatchEvent(n)}),this},l.prototype.one=function(t,e){let n=!1;return this.on(t,function(o,i){n||(n=!0,u(this).off(t,e),e.call(this,o,i,this))}),this},l.prototype.on=function(t,e){const n=t.match(/\S+/g)||[];let i;return"function"!=typeof e&&(e=(i=e).handler),this.each(function(t,s){u.each(n,function(t,n){!function(t,e,n,i){let s=!1;u.each(c,function(){if(this.element===t&&this.path===e&&this.handler===n)return o.w("Handler already registered",t,e,n),s=!0,!1}),s||(c.push({element:t,path:e,handler:n,opgions:i}),t.addEventListener(e,a,!(!r||null!=i&&!1===i.passive)&&{passive:!0}))}(s,n,e,i)})}),this},l.prototype.off=function(t,e){const n=t.match(/\S+/g)||[];return this.each(function(t,o){u.each(n,function(t,n){s(o,n,e)})}),this},l.prototype.reset=function(){return this.each(function(t,e){!function(t){u.each(c,function(){this.element===t&&(o.t("Removing event handler",this.element,this.path,this.handler),s(this.element,this.path,this.handler))})}(e)}),this},l.prototype.isEmpty=function(){return 0===this._selection[0].innerHTML.replace(/\s/g,"").length},l.prototype.position=function(){return null!=this._selection[0]?u.getPosition(this._selection[0]):{x:-1,y:-1,visible:!1}},l.prototype.css=function(t,e){const n=this;if("object"==typeof t)u.each(t,function(t,e){n.each(function(n,o){o.style[t]=e})});else{if(i.isNoU(e))return this._selection[0].style[t];n.each(function(n,o){o.style[t]=e})}return this},l.prototype.addClass=function(t){const e=t.match(/\S+/g)||[];return u.each(this._selection,function(n,o){o.classList?u.each(e,function(t,e){o.classList.add(e)}):o.className+=" "+t}),this},l.prototype.hasClass=function(t){return u.hasClass(this._selection[0],t)},l.prototype.removeClass=function(t){const e=t.match(/\S+/g)||[];return u.each(this._selection,function(n,o){o.classList?u.each(e,function(t,e){o.classList.remove(e)}):o.className=o.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}),this},l.prototype.prev=function(){return new l(this._selection[0].previousElementSibling)},l.prototype.next=function(){return new l(this._selection[0].nextElementSibling)},l.prototype.html=function(t){return i.isNoU(t)?this._selection[0].innerHTML:(this.each(function(e,n){n.innerHTML=t}),this)},l.prototype.checked=function(t){if(i.isNoU(t)){const t=this._selection[0].checked;return null!=t&&"false"!=t&&(t||"checked"==t)}return this.each(function(e,n){n.checked=t}),this},l.prototype.value=function(t){return i.isNoU(t)?this._selection[0].value:(this.each(function(e,n){n.value=t}),this)},l.prototype.append=function(t){return"string"==typeof t?this._selection[0].innerHTML+=t:this._selection[0].appendChild(t),this},l.prototype.insert=function(t,e){const n=this.children().get(t);return null!==n?this._selection[0].insertBefore(e,n):this._selection[0].appendChild(e),this},l.prototype.prepend=function(t){return"string"==typeof t?this._selection[0].innerHTML=t+this._selection[0].innerHTML:this._selection[0].insertBefore(t,this._selection[0].firstElementChild),this},l.prototype.detach=function(){const t=this._selection[0],e=t.parentNode;return null!=e&&(t.__zuix_oldParent=e,t.__zuix_oldIndex=Array.prototype.indexOf.call(e.children,t),e.removeChild(t),o.t("Detached from parent",e,t)),this},l.prototype.attach=function(){const t=this._selection[0];return null==t.parentNode&&null!=t.__zuix_oldParent&&(u(t.__zuix_oldParent).insert(t.__zuix_oldIndex,t),t.__zuix_oldParent=null,delete t.__zuix_oldParent,delete t.__zuix_oldIndex),this},l.prototype.display=function(t){return i.isNoU(t)?this._selection[0].style.display:(u.each(this._selection,function(e,n){n.style.display=t}),this)},l.prototype.visibility=function(t){return i.isNoU(t)?this._selection[0].style.visibility:(u.each(this._selection,function(e,n){n.style.visibility=t}),this)},l.prototype.show=function(t){return this.display(null==t?"":t)},l.prototype.hide=function(){return this.display("none")};const u=function(t){return new l(t)};u.find=function(t){return u().find(t)},u.each=function(t,e){const n=null==t?0:Object.keys(t).length;if(n>0){let o=0;for(let i in t)if(t.hasOwnProperty(i)){let r=t[i];if(r instanceof Element&&(r=u(r)),!1===e.call(r,i,t[i],r))break;if(++o>=n)break}}return this},u.ajax=function(t){let e;e=i.isNoU(t)||i.isNoU(t.url)?t:t.url;const n=new XMLHttpRequest;return n.open("GET",e),n.onload=function(){200===n.status?i.isFunction(t.success)&&t.success(n.responseText):i.isFunction(t.error)&&t.error(n),i.isFunction(t.then)&&t.then(n)},n.send(),this},u.hasClass=function(t,e){const n=e.match(/\S+/g)||[];let o=!1;return u.each(n,function(e,n){if(o=t.classList?t.classList.contains(n):new RegExp("(^| )"+n+"( |$)","gi").test(t.className))return!1}),o},u.classExists=function(t){const e=t.match(/\S+/g)||[];let n=!1;return u.each(e,function(t,e){const o=document.styleSheets;if(null!=o)for(let t=0;t<o.length;t++)try{const i=o[t].rules||o[t].cssRules;if(null!=i)for(let t=0;t<i.length;t++)if(i[t].selectorText===e){n=!0;break}}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t}}),n},u.wrapElement=function(t,e){const n=document.createElement(t);return"string"==typeof e?n.innerHTML=e:n.appendChild(e),n},u.wrapCss=function(t,e){const n=/(([a-zA-Z0-9\240-\377=:-_\n,.@]+.*){([^{}]|((.*){([^}]+)[}]))*})/g;let i,r="";e=e.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/g,"");do{if((i=n.exec(e))&&i.length>1){let e=i[2];if(null!=e&&e.length>0){const n=(e=e.replace(/\n/g,"")).split(",");let o=!1;if(u.each(n,function(e,i){"."===i.replace(" ","")?r+="\n"+t+" ":"@"===i.trim()[0]?(r+=i+" ",i.trim().toLowerCase().startsWith("@media")&&(o=!0)):r+="\n"+t+"\n"+i+" ",e<n.length-1&&(r+=", ")}),o){const e=u.wrapCss(t,i[1].substring(i[2].length).replace(/^{([^\0]*?)}$/,"$1"));r+="{\n  "+e+"\n}"}else r+=i[1].substring(i[2].length)+"\n"}else o.w("z$.wrapCss was unable to parse rule.",e,i)}}while(i);return""!==r&&(e=r),e},u.appendCss=function(t,e,n){const o=document.head||document.getElementsByTagName("head")[0];let r=null;if(i.isNoU(e)){const t=document.getElementById(n);null!=t&&o.removeChild(t)}else o.removeChild(e);return"string"==typeof t?((r=document.createElement("style")).type="text/css",r.id=n,r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))):t instanceof Element&&(r=t),i.isNoU(r)||o.appendChild(r),r},u.replaceCssVars=function(t,e){const n=new RegExp(/\B\$var\[(.*[^\[\]])]/g);let o,i="",r=0,c=0;for(;o=n.exec(t);){let n=o[0];if(o.length>1){const t=o[1];let i=e;if(t.indexOf(".")>0){const e=t.split(".");for(let t=0;t<e.length-1&&void 0!==(i=i[e[t]]);t++);void 0!==i&&(n=i[e[e.length-1]],r++)}else void 0!==i[t]&&(n=i[t],r++)}i+=t.substr(c,o.index-c)+n,c=o.index+o[0].length}return r>0&&(i+=t.substr(c),t=i),t},u.replaceBraces=function(t,e){const n=new RegExp(/{?{.*?}?}/g);let o,r="",c=0,a=0;for(;o=n.exec(t);){if("string"==typeof o[0]&&(0===o[0].trim().length||o[0].indexOf("\n")>=0)){const e=t.substr(a,o.index-a)+o[0];r+=e,a+=e.length;continue}let n=o[0];if("function"==typeof e){const t=e(o[0]);i.isNoU(t)||(n=t,c++)}r+=t.substr(a,o.index-a)+n,a=o.index+o[0].length}return c>0?r+=t.substr(a):null},u.getClosest=function(t,e){for(;t&&t!==document;t=t.parentNode)if(t.matches(e))return t;return null},u.getPosition=function(t,e){const n=function(){let e=0,n=0,o=t.getBoundingClientRect(),i=t;for(;i;){if("body"===i.tagName.toLowerCase()){const t=i.scrollLeft||document.documentElement.scrollLeft,o=i.scrollTop||document.documentElement.scrollTop;e+=i.offsetLeft-t+i.clientLeft,n+=i.offsetTop-o+i.clientTop}else e+=i.offsetLeft-i.scrollLeft+i.clientLeft,n+=i.offsetTop-i.scrollTop+i.clientTop;i=i.offsetParent}return{x:e,y:n,rect:o}}();n.visible=!1;let o=t.offsetParent;if(null!=o){if(o!==document.body){let t=o.offsetParent;for(;null!=t&&null!==t.offsetParent&&t.offsetHeight===t.scrollHeight;)t=t.offsetParent;null!=t&&(o=t)}let i=o.getBoundingClientRect();o===document.body&&(i={x:i.x,y:i.y,width:document.documentElement.offsetWidth||document.documentElement.clientWidth,height:document.documentElement.offsetHeight||document.documentElement.clientHeight,top:0,left:0,right:document.documentElement.clientWidth||document.documentElement.offsetWidth,bottom:document.documentElement.clientHeight||document.documentElement.offsetHeight}),null==e&&(e=0);const r=t.getBoundingClientRect(),c=!(r.left-1>i.right-e||r.right+1<i.left+e||r.top-1>i.bottom-e||r.bottom+1<i.top+e);n.visible=c,n.frame={dx:(r.left+r.width/2-i.left)/i.width,dy:(r.top+r.height/2-i.top)/i.height},t=u(t),!c&&t.hasClass("--ui--visible")?(t.removeClass("--ui--visible"),n.event="exit"):c?c&&(t.hasClass("--ui--visible")?n.event="scroll":(n.event="enter",t.addClass("--ui--visible"))):n.event="off-scroll"}return n},u.ZxQuery=l,Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){const e=(this.document||this.ownerDocument).querySelectorAll(t);let n=e.length;for(;--n>=0&&e.item(n)!==this;);return n>-1}),function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}(),String.prototype.hashCode=function(){let t=0;if(0===this.length)return t;for(let e=0;e<this.length;e++){t=(t<<5)-t+this.charCodeAt(e),t|=0}return t},String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t}),e.exports=u},{"./Logger":2,"./Util.js":4}],6:[function(t,e,n){"use strict";var o,i;o=this,i=t("./zuix/Zuix.js"),"function"==typeof define&&define.amd?define("zuix",function(){return o.zuix=i.call(o)}):"object"==typeof e&&e.exports?e.exports=i.call(o):o.zuix=i.call(o)},{"./zuix/Zuix.js":12}],7:[function(t,e,n){e.exports=function(t){return null}},{}],8:[function(t,e,n){"use strict";const o=t("../helpers/Logger")("ComponentContext.js"),i=t("./OptionAttributes")(),r=t("../helpers/ZxQuery"),c=t("../helpers/Util");let a=null;function s(t,e,n){return a=t,this._options=null,this.contextId=null==e||null==e.contextId?null:e.contextId,this.componentId=null,this.trigger=function(t,e,o){"function"==typeof n&&n(t,e,o)},this._container=null,this._model=null,this._view=null,this._css=null,this._style=null,this._controller=null,this.behavior=null,this._eventMap=[],this._behaviorMap=[],this._c=null,this.options(e),this}s.prototype.container=function(t){return null==t?this._container:(t instanceof r.ZxQuery&&(t=t.get()),this._container=t,this)},s.prototype.view=function(t){if(void 0===t)return this._view;if(t instanceof r.ZxQuery&&(t=t.get()),o.t(this.componentId,"view:attach","timer:view:start"),"string"==typeof t){const e={content:t};this.trigger(this,"html:parse",e),t=e.content;const n=r.wrapElement("div",t);null!=n.firstElementChild&&(null!=n.firstElementChild.getAttribute(i.dataUiView)?1===n.children.length&&(t=n.firstElementChild.innerHTML):t=n.innerHTML),null!=this._container?(this._view=this._container,this._view.innerHTML+=t):null!=this._view?this._view.innerHTML=t:this._view=n,r(this._view).find("script").each(function(t,e){"true"!==this.attr("zuix-loaded")&&(this.attr("zuix-loaded","true"),eval.call(window,e.innerHTML))}),this.trigger(this,"view:process",r(this._view))}else t instanceof r.ZxQuery&&(t=t.get()),null!=this._container?(this._view=r.wrapElement("div",t.outerHTML).firstElementChild,this._view.removeAttribute(i.dataUiView),this._container.appendChild(this._view),this._view=this._container):this._view=t;const e=r(this._view);return!1===this._options.css?e.addClass("zuix-css-ignore"):e.removeClass("zuix-css-ignore"),e.find("["+i.dataUiLoad+"]").each(function(t,e){this.attr(i.dataUiLoaded,"false")}),this.modelToView(),o.t(this.componentId,"view:attach","timer:view:stop"),this},s.prototype.style=function(t){if(void 0===t)return this._style;if(o.t(this.componentId,"view:style","timer:view:start"),null==t||t instanceof Element)this._css=t instanceof Element?t.innerText:t,this._style=r.appendCss(t,this._style,this.componentId);else if("string"==typeof t){this._css=t;const e={content:t};this.trigger(this,"css:parse",e),t=e.content,t=r.wrapCss("["+i.dataUiComponent+'="'+this.componentId+'"]:not(.zuix-css-ignore)',t),this._style=r.appendCss(t,this._style,this.componentId)}return o.t(this.componentId,"view:style","timer:view:stop"),this},s.prototype.model=function(t){return void 0===t?this._model:(this._model=t,this.modelToView(),null!=this._c&&c.isFunction(this._c.update)&&this._c.update.call(this._c,this._c),this)},s.prototype.controller=function(t){return void 0===t?this._controller:(this._controller=t,this)},s.prototype.options=function(t){if(null==t)return this._options;const e=this._options=this._options||{};return r.each(t,function(t,n){e[t]=n}),null!=e.componentId&&(this.componentId=e.componentId),this.container(e.container),this.view(e.view),void 0!==e.css&&this.style(e.css),this.controller(e.controller),this.model(e.model),this},s.prototype.on=function(t,e){return this._c.on(t,e),this},s.prototype.loadCss=function(t,e){const n=this;c.isNoU(t)&&(t={}),c.isNoU(t.caching)||(e=t.caching);let i=n.componentId+".css";return c.isNoU(t.path)||(i=t.path),e||(i+="?"+(new Date).getTime()),r.ajax({url:a.getResourcePath(i),success:function(e){n.style(e),c.isFunction(t.success)&&t.success.call(n,e,n)},error:function(e){o.e(e,n),c.isFunction(t.error)&&t.error.call(n,e,n)},then:function(){c.isFunction(t.then)&&t.then.call(n,n)}}),this},s.prototype.loadHtml=function(t,e){const n=this;let s=n.componentId;c.isNoU(t)&&(t={}),c.isNoU(t.caching)||(e=t.caching),c.isNoU(t.path)||(s=t.path);let l=a.store("zuix.inlineViews");if(null==l&&(l=[],a.store("zuix.inlineViews",l)),null!=l[s])n.view(l[s]),c.isFunction(t.success)&&t.success.call(n,l[s],n),c.isFunction(t.then)&&t.then.call(n,n);else{const u=r().find("["+i.dataUiView+'="'+s+'"]:not(['+i.dataUiComponent+'*=""])');if(u.length()>0){const e=u.get(0);l[s]=e.innerHTML,n.view()===e||null!=n.container()&&n.container().contains(e)?(u.attr(i.dataUiView,null),n._view=e,this.trigger(this,"view:process",r(n.view()))):n.view(e.innerHTML),c.isFunction(t.success)&&t.success.call(n,e.innerHTML,n),c.isFunction(t.then)&&t.then.call(n,n)}else{const i=c.isNoU(t.cext)?".html":t.cext;s==n.componentId&&(s+=i+(e?"":"?"+(new Date).getTime())),r.ajax({url:a.getResourcePath(s),success:function(e){n.view(e),c.isFunction(t.success)&&t.success.call(n,e,n)},error:function(e){o.e(e,n),c.isFunction(t.error)&&t.error.call(n,e,n)},then:function(){c.isFunction(t.then)&&t.then.call(n,n)}})}}return this},s.prototype.viewToModel=function(){o.t(this.componentId,"view:model","timer:vm:start");const t=this;return this._model={},r(this._view).find("["+i.dataUiField+"]").each(function(e,n){if(this.parent("pre,code").length()>0)return!0;const o=this.attr(i.dataUiField),r=!c.isNoU(n.innerHTML)&&c.isIE()?n.cloneNode(!0):n;if(o.indexOf(".")>0){const e=o.split(".");let n=t._model;for(let t=0;t<e.length-1;t++)void 0===n[e[t]]&&(n[e[t]]={}),n=n[e[t]];n[e[e.length-1]]=r}else t._model[o]=r}),o.t(this.componentId,"view:model","timer:vm:stop"),this},s.prototype.modelToView=function(){if(o.t(this.componentId,"model:view","timer:mv:start"),null!=this._view&&null!=this._model){const t=this;r(this._view).find("["+i.dataUiField+"]").each(function(e,n){if(this.parent("pre,code").length()>0)return!0;let o=this.attr(i.dataBindTo);null==o&&(o=this.attr(i.dataUiField));const a=r(t._view);if("function"==typeof t._model)t._model.call(a,this,o,a);else{const e=c.propertyFromPath(t._model,o);if("function"==typeof e)e.call(a,this,o,a);else if(null!=e)switch(n.tagName.toLowerCase()){case"img":n.src=c.isNoU(e.src)?c.isNoU(e.innerHTML)?e:e.innerHTML:e.src,e.alt&&(n.alt=e.alt);break;case"a":n.href=c.isNoU(e.href)?c.isNoU(e.innerHTML)?e:e.innerHTML:e.getAttribute("href"),e.title&&(n.title=e.title),c.isNoU(e.href)||c.isNoU(e.innerHTML)||""===e.innerHTML.trim()||(n.innerHTML=e.innerHTML);break;case"input":n.value=c.isNoU(e.value)?c.isNoU(e.innerHTML)?e:e.innerHTML:e.value;break;default:if(n.innerHTML=c.isNoU(e.innerHTML)?e:e.innerHTML,null!=e.attributes)for(let t=0;t<e.attributes.length;t++){const o=e.attributes[t];o.specified&&o.name!==i.dataUiField&&("+"===o.value[0]&&n.hasAttribute(o.name)&&(o.value=n.getAttribute(o.name)+" "+o.value.substring(1)),n.setAttribute(o.name,o.value))}}}})}return o.t(this.componentId,"model:view","timer:mv:stop"),this},e.exports=s},{"../helpers/Logger":2,"../helpers/Util":4,"../helpers/ZxQuery":5,"./OptionAttributes":11}],9:[function(t,e,n){"use strict";const o=t("./OptionAttributes")(),i="https://zuixjs.github.io/zkit/lib/";v.prototype.componentize=function(t,e){if(g.trigger(this,"componentize:begin"),null!=e){const n=b(t);null==n?x(t,[e]):n.push(e)}else C(t);return S(t),this},v.prototype.applyOptions=function(t,e){return B(t,e),this},v.prototype.resolvePath=function(t){return k(t)},v.prototype.willLoadMore=function(){return l.length>0||s.length>0},v.prototype.lazyLoad=function(t,e){return _(t,e)},v.prototype.dequeue=function(t){for(let e=0;e<l.length;e++){if(l[e].element===t){l.splice(e,1);break}}},v.prototype.setHost=function(t){return g=t,this},e.exports=function(){return new v};const r=t("../helpers/Logger")("ComponentContext.js"),c=t("../helpers/Util"),a=t("../helpers/ZxQuery"),s=[],l=[],u=[],d=[],p=function(){return{element:null,priority:0,visible:!0,lazy:!1}},h=t("./../helpers/AsynChain")({doWork:function(t,e){return a(t.element).one("component:ready",function(){e()}),function(t){const e=a(t);if(null!=e.attr(o.dataUiLoaded)||e.parent("pre,code").length()>0)return!1;e.attr(o.dataUiLoaded,"true");let n=e.attr(o.dataUiOptions);c.isNoU(n)?n={}:(n=c.propertyFromPath(window,n),n=c.cloneObject(n)||{});const i=e.attr(o.dataUiContext);if(!c.isNoU(i)){const t=g.context(i);null!==t&&(n=t.options()),n.contextId=i}c.isNoU(n.view)&&!e.isEmpty()?(n.view=t,n.viewDeferred=!0):c.isNoU(n.view)&&c.isNoU(n.container)&&e.isEmpty()&&(n.container=t);let r=e.attr(o.dataUiLoad);if(c.isNoU(r)){const t=e.attr(o.dataUiInclude);if(null==t)return!1;r=k(t),e.attr(o.dataUiInclude,r),e.attr(o.dataUiComponent,r),c.isNoU(n.controller)&&(n.controller=function(){})}else r=k(r),e.attr(o.dataUiLoad,r);const s=e.attr(o.dataBindModel);!c.isNoU(s)&&s.length>0&&(n.model=c.propertyFromPath(window,s));const l=e.attr(o.dataUiPriority);c.isNoU(l)||(n.priority=parseInt(l));return a(t).one("component:ready",function(){C(t),S(t)}),g.load(r,n),!0}(t.element)},willBreak:function(){return!1},status:function(t){switch(t){case"start":break;case"done":S()}}});let f=!1,m=1,g=null,y=!1;function v(){}function _(t,e){return null!=t&&(f=!t),null!=e&&(m=e),!y&&!f}function C(t){null==t&&(t=document),s.indexOf(t)||s.push(t)}navigator&&navigator.userAgent&&(y=new RegExp(/bot|googlebot|crawler|spider|robot|crawling/i).test(navigator.userAgent)),y&&r.d(navigator.userAgent,"is a bot, ignoring `lazy-loading` option.");const w=[];function x(t,e){w.push({element:t,waiting:e})}function b(t){for(let e=0;e<w.length;e++){const n=w[e];if(n.element===t)return n.waiting}return null}function S(t){!function(t){null==t&&s.length>0&&(t=s.unshift()),t instanceof a.ZxQuery&&(t=t.get());let e=b(t);e=a(t).find("["+o.dataUiLoad+"]:not(["+o.dataUiLoaded+"]),["+o.dataUiInclude+"]:not(["+o.dataUiLoaded+"])"),x(t,e=Array.prototype.slice.call(e._selection));const n=[];for(let t=0;t<e.length;t++){const i=e[t];let r=parseInt(i.getAttribute(o.dataUiPriority));isNaN(r)&&(r=0);let c=0,a=i.parentNode,s=!1;for(;null!=a&&a!==document;){if(c++,null!=a.getAttribute(o.dataUiView)){s=!0;break}a=a.parentNode}if(!s){const t=new p;t.element=i,t.priority=r+1e3*c,n.push(t)}}let i=0;for(let t=0;t<n.length;t++){let e=!1;for(let o=0;o<l.length;o++)if(n[t].element===l[o].element){e=!0;break}if(!e){const e=n[t].element,r=e.getAttribute(o.dataUiOptions);B(e,r),l.push(n[t]),i++}}r.t("componentize:count",l.length,i),(0===i||0===s.length&&0===l.length)&&g.trigger(this,"componentize:end")}(t);const e=function(){l.sort(function(t,e){return t.priority-e.priority});let t=null,e=l.length>0?l.shift():null;for(;null!=e&&null!=e.element;){const n=I(e.element);if(_()&&n?(e.lazy=!0,e.visible=a.getPosition(e.element,m).visible):(e.lazy=!1,e.visible=!0),null!=e&&null!=e.element&&e.visible){t={item:e,cancelable:e.lazy};break}if(!(l.length>0))break;e=l.shift()}return t}();null!=e&&h.append([e])}function k(t){let e=g.store("config");null!=e&&null!=e[location.host]&&(e=e[location.host]);const n=null!=e&&null!=e.libraryPath?e.libraryPath:i;return t.startsWith("@lib/")&&(t=n+t.substring(5)),t}function B(t,e){"string"==typeof e&&(e=c.propertyFromPath(window,e)),null!=t&&null!=e&&(null!=e.lazyLoad&&t.setAttribute(o.dataUiLazyload,e.lazyLoad.toString().toLowerCase()),null!=e.contextId&&t.setAttribute(o.dataUiContext,e.contextId.toString().toLowerCase()),null!=e.componentId&&t.setAttribute(o.dataUiLoad,e.componentId.toString().toLowerCase()))}function L(t){const e={element:t};return u.push(e),e}function I(t){if("false"===t.getAttribute(o.dataUiLazyload))return!1;let e=function(t){for(let e=0;e<u.length;e++){const n=u[e];if(n.element===t)return n}return null}(t);if(null!=e)return!0;{const n=a.getClosest(t.parentNode,"["+o.dataUiLazyload+"=scroll],["+o.dataUiLazyload+"=true]");if(null!=n){e=L(t);let i=function(t){for(let e=0;e<d.length;e++){const n=d[e];if(n.element===t)return n}return null}(n);return null==i&&(i=function(t){const e={element:t};return d.push(e),e}(n),"scroll"===n.getAttribute(o.dataUiLazyload)&&function(t,e){let n=(new Date).getTime();a(e===document.body?window:e).on("scroll",function(){const t=(new Date).getTime();t-n>100&&(n=t,S(e))})}(0,n)),!0}if("true"===t.getAttribute(o.dataUiLazyload))return e=L(t),!0}return!1}},{"../helpers/Logger":2,"../helpers/Util":4,"../helpers/ZxQuery":5,"./../helpers/AsynChain":1,"./OptionAttributes":11}],10:[function(t,e,n){"use strict";const o=t("../helpers/ZxQuery");function i(t){const e=this;this._view=null,this.context=t,this._fieldCache=[],this.init=null,this.create=null,this.update=null,this.destroy=null,this._childNodes=[],this.saveView=function(){this.restoreView(),this.view().children().each(function(t,n){e._childNodes.push(n)})},this.restoreView=function(){this._childNodes.length>0&&(e.view().html(""),o.each(e._childNodes,function(t,n){e.view().append(n)}),this._childNodes.length=0)},this.on=function(t,e){return this.addEvent(t,e),this},this.mapEvent=function(t,e,n,o){null!=e&&(e.off(n,this.eventRouter),t[n]=o,e.on(n,this.eventRouter))},this.eventRouter=function(n){const o=e.view();"function"==typeof t._behaviorMap[n.type]&&t._behaviorMap[n.type].call(o,n,n.detail,o),"function"==typeof t._eventMap[n.type]&&t._eventMap[n.type].call(o,n,n.detail,o)};const n=t.options();let i=null;if(null!=n.on)for(let t in n.on)n.on.hasOwnProperty(t)&&(i=n.on[t],e.addEvent(t,i));if(null!=n.behavior)for(let t in n.behavior)n.behavior.hasOwnProperty(t)&&(i=n.behavior[t],e.addBehavior(t,i));return t.controller().call(this,this),this}i.prototype.addEvent=function(t,e){return this.mapEvent(this.context._eventMap,this.view(),t,e),this},i.prototype.addBehavior=function(t,e){return this.mapEvent(this.context._behaviorMap,this.view(),t,e),this},i.prototype.field=function(t){return null},i.prototype.clearCache=function(){this._fieldCache.length=0},i.prototype.view=function(t){if(null==this.context.view()&&this._view===this.context.view()||(this.clearCache(),this._view=o(this.context.view())),null!=t)return this._view.find(t);if(null!==this._view)return this._view;throw new Error("Not attached to a view yet.")},i.prototype.model=function(t){return null==t?this.context.model():(this.context.model(t),this)},i.prototype.options=function(){return this.context.options()},i.prototype.trigger=function(t,e,n){if(null==this.context._eventMap[t]&&!0!==n&&this.addEvent(t,null),!0===n){let n=this.context.container();null==n&&(n=this.context.view()),null!=n&&o(n).trigger(t,e),this.context.trigger(this.context,t,e)}else this.view().trigger(t,e);return this},i.prototype.expose=function(t,e){if("object"==typeof t){const e=this;o.each(t,function(t,n){e.context[t]=n})}else this.context[t]=e;return this},i.prototype.loadCss=function(t){return this.context.loadCss(t),this},i.prototype.loadHtml=function(t){return this.saveView(),this.context.loadHtml(t),this},i.prototype.log={},i.prototype.for=function(t){return this},e.exports=i},{"../helpers/ZxQuery":5}],11:[function(t,e,n){const o=Object.freeze({dataBindModel:"data-bind-model",dataBindTo:"data-bind-to",dataUiComponent:"data-ui-component",dataUiContext:"data-ui-context",dataUiField:"data-ui-field",dataUiInclude:"data-ui-include",dataUiLazyload:"data-ui-lazyload",dataUiLoad:"data-ui-load",dataUiLoaded:"data-ui-loaded",dataUiOptions:"data-ui-options",dataUiPriority:"data-ui-priority",dataUiView:"data-ui-view",zuixLoaded:"zuix-loaded"});e.exports=function(t){return o}},{}],12:[function(_dereq_,module,exports){"use strict";const _log=_dereq_("../helpers/Logger")("Zuix.js"),util=_dereq_("../helpers/Util"),z$=_dereq_("../helpers/ZxQuery"),TaskQueue=_dereq_("../helpers/TaskQueue"),ComponentContext=_dereq_("./ComponentContext"),ContextController=_dereq_("./ContextController"),_componentizer=_dereq_("./Componentizer")(),_optionAttributes=_dereq_("./OptionAttributes")();_dereq_("./ComponentCache");const _contextRoot=[],_hooksCallbacks=[],_globalHandlers={},_componentTask=[],_pendingResourceTask={},resourceLoadTask=[],taskQueue=function(t){return util.isNoU(_componentTask[t])&&(_componentTask[t]=new TaskQueue(function(t,e,n){trigger(t,e,n)})),_componentTask[t]};let _componentCache=[],_contextSeqNum=0,_enableHttpCaching=!0;function Zuix(){return _componentizer.setHost(this),this._store=[],this._fieldCache=[],this}function controller(t){return"function"!=typeof t.for&&(t.for=function(e){return _globalHandlers[e]=t,t}),t}function field(t,e,n){util.isNoU(n)&&(n=this),null==n._fieldCache&&(n._fieldCache={});let o=null;if(void 0===n._fieldCache[t]){if(null!=(o=z$(e).find("["+_optionAttributes.dataUiField+'="'+t+'"]'))&&o.length()>0&&(n._fieldCache[t]=o,1===o.length()&&util.isNoU(o.field))){const t=this;o.field=function(e){return t.field(e,o,o)}}}else o=n._fieldCache[t];return o}function load(t,e){t=_componentizer.resolvePath(t);let n=null;return util.isNoU(e)?(e={},n=new ComponentContext(zuix,e,trigger)):(e.componentId=t,util.isNoU(e.contextId)?(!1===e&&(e={}),e.contextId="zuix-ctx-"+ ++_contextSeqNum,n=createContext(e)):null!==(n=context(e.contextId))?n.options(e):n=createContext(e)),n.componentId!=t&&(n.componentId=t),util.isFunction(e.ready)&&(n.ready=e.ready),util.isFunction(e.error)&&(n.error=e.error),null==resourceLoadTask[t]?(resourceLoadTask[t]=!0,loadResources(n,e)):(null==_pendingResourceTask[t]&&(_pendingResourceTask[t]=[]),_pendingResourceTask[t].push({c:n,o:e}),n)}function getResourcePath(t){let e=zuix.store("config");return null!=e&&null!=e[location.host]&&(e=e[location.host]),!(t=_componentizer.resolvePath(t)).startsWith("//")&&t.indexOf("://")<0&&(t=(null!=e&&null!=e.resourcePath?e.resourcePath:"")+t),t}function loadResources(t,e){let n=getCachedComponent(t.componentId);if(null!==n&&null==e.controller&&null==t.controller()&&(t.controller(n.controller),_log.t(t.componentId+":js","component:cached:js")),util.isNoU(e.view)){if(null!==n&&(null!=n.view&&(t.view(n.view),_log.t(t.componentId+":html","component:cached:html")),!1!==e.css&&(e.css=!1,n.css_applied||(n.css_applied=!0,t.style(n.css),_log.t(t.componentId+":css","component:cached:css")))),util.isNoU(t.view()))return taskQueue("resource-loader").queue(t.componentId+":html",function(){resourceLoadTask[t.componentId]=this,t.loadHtml({cext:e.cext,caching:_enableHttpCaching,success:function(o){null==n&&(n=cacheComponent(t)),n.view=o,delete n.controller,!1!==e.css?(resourceLoadTask[t.componentId].step(t.componentId+":css"),t.loadCss({caching:_enableHttpCaching,success:function(t){n.css=t},error:function(e){_log.e(e,t)},then:function(){loadController(t,resourceLoadTask[t.componentId])}})):loadController(t,resourceLoadTask[t.componentId])},error:function(n){_log.e(n,t),util.isFunction(e.error)&&t.error.call(t,n,t)}})},e.priority),t}else t.view(e.view);return null==t.controller()?taskQueue("resource-loader").queue(t.componentId+":js",function(){resourceLoadTask[t.componentId]=this,loadController(t,resourceLoadTask[t.componentId])},_contextRoot.length):loadController(t),t}function unload(t){if(t instanceof Element){const e=t;t=zuix.context(e),_componentizer.dequeue(e)}if(!util.isNoU(t)){util.isNoU(t._c)||(util.isNoU(t._c.view())||(t._c.view().attr(_optionAttributes.dataUiComponent,null),t._c.view().reset(),util.isNoU(t._c._fieldCache)||z$.each(t._c._fieldCache,function(t,e){e.reset()}),t._c.view().detach()),util.isFunction(t._c.destroy)&&t._c.destroy.call(t,t));const e=t.container();null!=e&&null!=e.parentNode&&e.parentNode.removeChild(e)}}function createContext(t){const e=new ComponentContext(zuix,t,trigger);return _contextRoot.push(e),e}function context(t,e){let n=null;if(t instanceof z$.ZxQuery)t=t.get();else if("string"==typeof t){const e=z$.find("["+_optionAttributes.dataUiContext+'="'+t+'"]');e.length()>0&&(t=e.get())}return z$.each(_contextRoot,function(e,o){if(t instanceof Element&&(o.view()===t||o.container()===t)||util.objectEquals(o.contextId,t))return n=o,!1}),"function"==typeof e&&(t instanceof Element||t instanceof z$.ZxQuery)&&(null==n?z$(t).one("component:ready",function(){n=zuix.context(this),e.call(n,n)}):e.call(n,n)),n}function hook(t,e){util.isNoU(e)?delete _hooksCallbacks[t]:_hooksCallbacks[t]=e}function trigger(t,e,n){util.isFunction(_hooksCallbacks[e])&&_hooksCallbacks[e].call(t,n,t)}function httpCaching(t){return null!=t&&(_enableHttpCaching=t),_enableHttpCaching}function removeCachedComponent(t){}function getCachedComponent(t){let e=null;return z$.each(_componentCache,function(n,o){if(util.objectEquals(o.componentId,t))return e=o,!1}),e}function loadController(t,e){if(void 0===t.options().controller&&null===t.controller())if(_log.d(t.componentId,"controller:load"),util.isNoU(e)||e.step(t.componentId+":js"),util.isFunction(_globalHandlers[t.componentId]))t.controller(_globalHandlers[t.componentId]),createComponent(t,e);else{const n=function(e){const n=t.componentId+".js"+(_enableHttpCaching?"":"?"+(new Date).getTime());z$.ajax({url:getResourcePath(n),success:function(e){try{const n=e.indexOf("function"),o=e.indexOf(".load");o>1&&o<n&&(e=e.substring(0,o-4));const i=e.indexOf(".controller");i>1&&i<n&&(e=e.substring(i+11));const r=e.indexOf("//<--controller");r>0&&(e=e.substring(0,r)),e+='\n//# sourceURL="'+t.componentId+'.js"\n',t.controller(getController(e))}catch(n){_log.e(new Error,n,e,t),util.isFunction(t.error)&&t.error.call(t,n,t)}},error:function(e){_log.e(e,new Error,t),util.isFunction(t.error)&&t.error.call(t,e,t)},then:function(){createComponent(t,e)}})};util.isNoU(e)?taskQueue("resource-loader").queue(t.componentId+":js",function(){n(resourceLoadTask[t.componentId]=this)},t.options().priority):n(e)}else createComponent(t,e)}function cacheComponent(t){const e=t.view().innerHTML,n=z$.wrapElement("div",e),o={componentId:t.componentId,view:n.innerHTML,css:t._css,controller:t.controller()};return _componentCache.push(o),_log.t(t.componentId,"bundle:added"),o}function createComponent(t,e){if(resourceLoadTask[t.componentId]=null,util.isNoU(t.view()))_log.e(t.componentId,"component:view:undefined");else{let n=getCachedComponent(t.componentId);t.options().viewDeferred?_log.w(t.componentId,"component:deferred:load"):null===n?n=cacheComponent(t):null==n.controller&&(n.controller=t.controller()),null!=e&&e.callback(function(){_log.d(t.componentId,"controller:create:deferred"),initController(t._c)});const o=z$(t.view());if(null==o.attr(_optionAttributes.dataUiContext)&&o.attr(_optionAttributes.dataUiContext,t.contextId),_log.d(t.componentId,"component:initializing"),util.isFunction(t.controller())){const o=t._c=new ContextController(t);if(o.log=_dereq_("../helpers/Logger")(t.contextId),"function"==typeof o.init&&o.init(),!util.isNoU(o.view()))if(null==o.view().attr(_optionAttributes.dataUiComponent)&&o.view().attr(_optionAttributes.dataUiComponent,t.componentId),util.isNoU(t.model())&&!util.isNoU(t.view())&&t.viewToModel(),o.trigger("view:apply"),t.options().viewDeferred){t.options().viewDeferred=!1,o.saveView(),null===n&&(n={componentId:t.componentId,controller:t.controller()},_componentCache.push(n),_log.t(t.componentId,"bundle:added"),_log.d(t.componentId,"component:deferred:load"));let i=-1;!1!==t.options().css&&(null==n.css?(-1===i&&(i=0),i++,t.loadCss({caching:_enableHttpCaching,success:function(e){null==n.css&&(n.css=e),_log.d(t.componentId,"component:deferred:css",i)},then:function(){0==--i&&null!=e&&e.end()}})):t.style(n.css)),!1!==t.options().html&&(null==n.view?(-1===i&&(i=0),i++,t.loadHtml({cext:t.options().cext,caching:_enableHttpCaching,success:function(e){null==n.view&&(n.view=e),_log.d(t.componentId,"component:deferred:html",i)},error:function(e){_log.e(e,t),util.isFunction(t.options().error)&&t.options().error.call(t,e,t)},then:function(){0==--i&&null!=e&&e.end()}})):t.view(n.view)),-1===i&&null!=e&&e.end()}else null!=e&&e.end();null==e&&(_log.d(t.componentId,"controller:create"),initController(o))}else _log.w(t.componentId,"component:controller:undefined")}}function initController(t){if(_log.t(t.context.componentId,"controller:init","timer:init:start"),t.view().find("["+_optionAttributes.dataUiLoaded+'="false"]:not(['+_optionAttributes.dataUiComponent+"])").each(function(t,e){this.attr(_optionAttributes.dataUiLoaded,null)}),t.field=function(e){const n=field(e,t.view(),t);return n.on=function(e,n,o,i){if("string"==typeof n){const e=n;n=function(){t.trigger(e,o,i)}}return z$.ZxQuery.prototype.on.call(this,e,n)},n},util.isFunction(t.create)&&t.create(),t.trigger("view:create"),util.isFunction(t.context.ready)&&t.context.ready.call(t.context,t.context),t.trigger("component:ready",t.view(),!0),_log.t(t.context.componentId,"controller:init","timer:init:stop"),_log.i(t.context.componentId,"component:loaded",t.context.contextId),null!=_pendingResourceTask[t.context.componentId]){const e=_pendingResourceTask[t.context.componentId];let n;for(_pendingResourceTask[t.context.componentId]=null;null!=e&&null!=(n=e.shift());)loadResources(n.c,n.o)}zuix.componentize(t.view())}function getController(t){let e=function(t){};if("string"==typeof t)try{e=eval.call(this,t)}catch(e){_log.e(this,e,t)}return e}function replaceCache(t){_componentCache=t}Zuix.prototype.field=function(t,e){return field.call(this,t,e)},Zuix.prototype.load=function(t,e){return load.call(this,t,e)},Zuix.prototype.unload=function(t){return unload(t),this},Zuix.prototype.controller=function(t){return controller.call(this,t)},Zuix.prototype.context=function(t,e){return context.call(this,t,e)},Zuix.prototype.createComponent=function(t,e){if(null==e&&(e={}),util.isNoU(e.contextId)&&(e.contextId="zuix-ctx-"+ ++_contextSeqNum),null!=context(e.contextId))throw new Error("Context arelady exists.");return e.container=document.createElement("div"),e.componentId=t,_componentizer.applyOptions(e.container,e),createContext(e)},Zuix.prototype.trigger=function(t,e,n){return trigger(t,e,n),this},Zuix.prototype.hook=function(t,e){return hook(t,e),this},Zuix.prototype.using=function(t,e,n){e=_componentizer.resolvePath(e);const o=(t=t.toLowerCase())+"-"+e.hashCode();if("component"===t){const t=context(o);null==t?zuix.load(e,{contextId:o,view:"",priority:-10,ready:function(t){"function"==typeof n&&n(e,t)},error:function(){n(e,null)}}):"function"==typeof n&&n(e,t)}else{const i="style"===t;if(0===z$.find(t+'[id="'+o+'"]').length()){const r=document.head||document.getElementsByTagName("head")[0],c=document.createElement(t);i?(c.type="text/css",c.id=o):(c.type="text/javascript",c.id=o),r.appendChild(c);const a=function(t){i?c.styleSheet?c.styleSheet.cssText=t:c.appendChild(document.createTextNode(t)):c.innerText?c.innerText=t:c.appendChild(document.createTextNode(t)),n&&n(e,o)},s="_res/"+t+"/"+o,l=getCachedComponent(s);null!=l?a(i?l.css:l.controller):z$.ajax({url:e,success:function(t){const n={componentId:s,view:null,css:i?t:null,controller:i?null:t,using:e};_componentCache.push(n),a(t)},error:function(){r.removeChild(c),n&&n(e)}})}else console.log("Resource already added "+o+"("+e+")"),n&&n(e,o)}},Zuix.prototype.lazyLoad=function(t,e){return null==t?_componentizer.lazyLoad():(_componentizer.lazyLoad(t,e),this)},Zuix.prototype.httpCaching=function(t){return null==t?httpCaching():(httpCaching(t),this)},Zuix.prototype.componentize=function(t){return _componentizer.componentize(t),this},Zuix.prototype.store=function(t,e){return null!=e&&(this._store[t]=e),this._store[t]},Zuix.prototype.getResourcePath=function(t){return getResourcePath(t)},Zuix.prototype.bundle=function(bundleData,callback){if(util.isNoU(bundleData))return _componentCache;if(bundleData&&"boolean"==typeof bundleData){_log.t("bundle:start");const t=_componentizer.lazyLoad();if(_componentizer.lazyLoad(!1),_componentizer.componentize(),"function"==typeof callback){const e=function(e){setTimeout(function(){_componentizer.willLoadMore()?(_log.t("bundle:wait"),e(e)):(_log.t("bundle:end"),_componentizer.lazyLoad(t),callback())},1e3)};e(e)}}else{for(let c=0;c<bundleData.length;c++)bundleData[c].css_applied&&delete bundleData[c].css_applied,"string"==typeof bundleData[c].controller&&(bundleData[c].controller=eval(bundleData[c].controller));_componentCache=bundleData}return this},Zuix.prototype.$=z$,Zuix.prototype.TaskQueue=TaskQueue,Zuix.prototype.ZxQuery=z$.ZxQuery,Zuix.prototype.dumpCache=function(){return _componentCache},Zuix.prototype.dumpContexts=function(){return _contextRoot},module.exports=function(t){const e=new Zuix;return"loading"!=document.readyState?e.componentize():document.addEventListener("DOMContentLoaded",function(){e.componentize()}),_log.monitor(function(t,n){util.isFunction(e.monitor)&&e.monitor(t,Array.prototype.slice.call(n))}),e}},{"../helpers/Logger":2,"../helpers/TaskQueue":3,"../helpers/Util":4,"../helpers/ZxQuery":5,"./ComponentCache":7,"./ComponentContext":8,"./Componentizer":9,"./ContextController":10,"./OptionAttributes":11}]},{},[6])(6)}),BarcodeScanner={Config:{Multiple:!0,DecodeFormats:["Code128","Code93","Code39","EAN-13","2Of5","Inter2Of5","Codabar"],ForceUnique:!0,LocalizationFeedback:!1,SkipOrientation:!1},SupportedFormats:["Code128","Code93","Code39","EAN-13","2Of5","Inter2Of5","Codabar"],ScanCanvas:null,ScanContext:null,SquashCanvas:document.createElement("canvas"),ImageCallback:null,streamCallback:null,LocalizationCallback:null,Stream:null,DecodeStreamActive:!1,Decoded:[],DecoderWorker:new Worker("DecoderWorker.js"),OrientationCallback:null,init:function(){BarcodeScanner.ScanCanvas=BarcodeScanner.FixCanvas(document.createElement("canvas")),BarcodeScanner.ScanCanvas.width=640,BarcodeScanner.ScanCanvas.height=480,BarcodeScanner.ScanContext=BarcodeScanner.ScanCanvas.getContext("2d")},SetRotationSkip:function(t){BarcodeScanner.Config.SkipOrientation=t},SetImageCallback:function(t){BarcodeScanner.ImageCallback=t},setStreamCallback:function(t){BarcodeScanner.streamCallback=t},SetLocalizationCallback:function(t){BarcodeScanner.LocalizationCallback=t,BarcodeScanner.Config.LocalizationFeedback=!0},SwitchLocalizationFeedback:function(t){BarcodeScanner.Config.LocalizationFeedback=t},DecodeSingleBarcode:function(){BarcodeScanner.Config.Multiple=!1},DecodeMultiple:function(){BarcodeScanner.Config.Multiple=!0},SetDecodeFormats:function(t){BarcodeScanner.Config.DecodeFormats=[];for(var e=0;e<t.length;e++)-1!=BarcodeScanner.SupportedFormats.indexOf(t[e])&&BarcodeScanner.Config.DecodeFormats.push(t[e]);0==BarcodeScanner.Config.DecodeFormats.length&&(BarcodeScanner.Config.DecodeFormats=BarcodeScanner.SupportedFormats.slice())},SkipFormats:function(t){for(var e=0;e<t.length;e++){var n=BarcodeScanner.Config.DecodeFormats.indexOf(t[e]);n>=0&&BarcodeScanner.Config.DecodeFormats.splice(n,1)}},AddFormats:function(t){for(var e=0;e<t.length;e++)-1!=BarcodeScanner.SupportedFormats.indexOf(t[e])&&-1==BarcodeScanner.Config.DecodeFormats.indexOf(t[e])&&BarcodeScanner.Config.DecodeFormats.push(t[e])},BarcodeScannerImageCallback:function(t){if("localization"!=t.data.success)if("orientationData"!=t.data.success){for(var e=[],n=0;n<t.data.result.length;n++)-1!=BarcodeScanner.Decoded.indexOf(t.data.result[n].Value)&&0!=BarcodeScanner.Config.ForceUnique||(e.push(t.data.result[n]),BarcodeScanner.Config.ForceUnique&&BarcodeScanner.Decoded.push(t.data.result[n].Value));BarcodeScanner.ImageCallback(e),BarcodeScanner.Decoded=[]}else BarcodeScanner.OrientationCallback(t.data.result);else BarcodeScanner.Config.LocalizationFeedback&&BarcodeScanner.LocalizationCallback(t.data.result)},BarcodeScannerStreamCallback:function(t){if("localization"!=t.data.success){if(t.data.success&&BarcodeScanner.DecodeStreamActive){for(var e=[],n=0;n<t.data.result.length;n++)-1!=BarcodeScanner.Decoded.indexOf(t.data.result[n].Value)&&0!=BarcodeScanner.ForceUnique||(e.push(t.data.result[n]),BarcodeScanner.ForceUnique&&BarcodeScanner.Decoded.push(t.data.result[n].Value));e.length>0&&BarcodeScanner.streamCallback(e)}BarcodeScanner.DecodeStreamActive&&(BarcodeScanner.ScanContext.drawImage(BarcodeScanner.Stream,0,0,BarcodeScanner.ScanCanvas.width,BarcodeScanner.ScanCanvas.height),BarcodeScanner.DecoderWorker.postMessage({scan:BarcodeScanner.ScanContext.getImageData(0,0,BarcodeScanner.ScanCanvas.width,BarcodeScanner.ScanCanvas.height).data,scanWidth:BarcodeScanner.ScanCanvas.width,scanHeight:BarcodeScanner.ScanCanvas.height,multiple:BarcodeScanner.Config.Multiple,decodeFormats:BarcodeScanner.Config.DecodeFormats,cmd:"normal",rotation:1})),BarcodeScanner.DecodeStreamActive||(BarcodeScanner.Decoded=[])}else BarcodeScanner.Config.LocalizationFeedback&&BarcodeScanner.LocalizationCallback(t.data.result)},DecodeImage:function(t){var e;t instanceof Image||t instanceof HTMLImageElement?(t.exifdata=!1,t.complete?BarcodeScanner.Config.SkipOrientation?BarcodeScanner.BarcodeScannerDecodeImage(t,1,""):EXIF.getData(t,function(t){var e=EXIF.getTag(t,"Orientation"),n=EXIF.getTag(t,"SceneCaptureType");"number"!=typeof e&&(e=1),BarcodeScanner.BarcodeScannerDecodeImage(t,e,n)}):((e=new Image).onload=function(){BarcodeScanner.Config.SkipOrientation?BarcodeScanner.BarcodeScannerDecodeImage(e,1,""):EXIF.getData(this,function(t){var e=EXIF.getTag(t,"Orientation"),n=EXIF.getTag(t,"SceneCaptureType");"number"!=typeof e&&(e=1),BarcodeScanner.BarcodeScannerDecodeImage(t,e,n)})},e.src=t.src)):((e=new Image).onload=function(){BarcodeScanner.Config.SkipOrientation?BarcodeScanner.BarcodeScannerDecodeImage(e,1,""):EXIF.getData(this,function(t){var e=EXIF.getTag(t,"Orientation"),n=EXIF.getTag(t,"SceneCaptureType");"number"!=typeof e&&(e=1),BarcodeScanner.BarcodeScannerDecodeImage(t,e,n)})},e.src=t)},DecodeStream:function(t){BarcodeScanner.Stream=t,BarcodeScanner.DecodeStreamActive=!0,BarcodeScanner.DecoderWorker.onmessage=BarcodeScanner.BarcodeScannerStreamCallback,BarcodeScanner.ScanContext.drawImage(t,0,0,BarcodeScanner.ScanCanvas.width,BarcodeScanner.ScanCanvas.height),BarcodeScanner.DecoderWorker.postMessage({scan:BarcodeScanner.ScanContext.getImageData(0,0,BarcodeScanner.ScanCanvas.width,BarcodeScanner.ScanCanvas.height).data,scanWidth:BarcodeScanner.ScanCanvas.width,scanHeight:BarcodeScanner.ScanCanvas.height,multiple:BarcodeScanner.Config.Multiple,decodeFormats:BarcodeScanner.Config.DecodeFormats,cmd:"normal",rotation:1})},StopStreamDecode:function(){BarcodeScanner.DecodeStreamActive=!1,BarcodeScanner.Decoded=[]},BarcodeScannerDecodeImage:function(t,e,n){8==e||6==e?"Landscape"==n&&t.width>t.height?(e=1,BarcodeScanner.ScanCanvas.width=640,BarcodeScanner.ScanCanvas.height=480):(BarcodeScanner.ScanCanvas.width=480,BarcodeScanner.ScanCanvas.height=640):(BarcodeScanner.ScanCanvas.width=640,BarcodeScanner.ScanCanvas.height=480),BarcodeScanner.DecoderWorker.onmessage=BarcodeScanner.BarcodeScannerImageCallback,BarcodeScanner.ScanContext.drawImage(t,0,0,BarcodeScanner.ScanCanvas.width,BarcodeScanner.ScanCanvas.height),BarcodeScanner.Orientation=e,BarcodeScanner.DecoderWorker.postMessage({scan:BarcodeScanner.ScanContext.getImageData(0,0,BarcodeScanner.ScanCanvas.width,BarcodeScanner.ScanCanvas.height).data,scanWidth:BarcodeScanner.ScanCanvas.width,scanHeight:BarcodeScanner.ScanCanvas.height,multiple:BarcodeScanner.Config.Multiple,decodeFormats:BarcodeScanner.Config.DecodeFormats,cmd:"normal",rotation:e,postOrientation:BarcodeScanner.PostOrientation})},DetectVerticalSquash:function(t){var e=t.naturalHeight,n=BarcodeScanner.SquashCanvas;n.width=1,n.height=e;var o=n.getContext("2d");o.drawImage(t,0,0);try{var i=o.getImageData(0,0,1,e).data}catch(t){return console.log("Cannot check verticalSquash: CORS?"),1}for(var r=0,c=e,a=e;a>r;){0===i[4*(a-1)+3]?c=a:r=a,a=c+r>>1}var s=a/e;return 0===s?1:s},FixCanvas:function(t){var e=t.getContext("2d"),n=e.drawImage;return e.drawImage=function(t,o,i,r,c,a,s,l,u){var d=1;t&&"IMG"==t.nodeName&&(d=BarcodeScanner.DetectVerticalSquash(t),r||(r=t.naturalWidth),c||(c=t.naturalHeight)),9==arguments.length?n.call(e,t,o,i,r,c,a,s,l,u/d):void 0!==r?n.call(e,t,o,i,r,c/d):n.call(e,t,o,i)},t}};