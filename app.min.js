function setupLiveReader(e){var t=$('<button class="uk-button uk-button-primary uk-width-1-1" onclick="stopBarcodeReader()">Close</button>'),o=document.createElement("div");o.style.position="absolute",o.style.zIndex="999",o.style.width="100%",o.style.height="100%",o.style.left="0",o.style.top="0",o.style.background="rgba(71, 76, 85, .5)",o.id="barcode-reader";var a=document.createElement("canvas"),d=document.createElement("video"),n=a.getContext("2d");a.style.position="absolute",o.appendChild(t[0]),o.appendChild(a),document.body.appendChild(o);navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then(function(t){window.currentStream=t.getTracks()[0],d.width=320,BarcodeScanner.init(),BarcodeScanner.streamCallback=function(t){console.log("barcode detected, stream will stop"),e.value=t[0].Value,BarcodeScanner.StopStreamDecode(),stopBarcodeReader()},d.setAttribute("autoplay",""),d.setAttribute("playsinline",""),d.setAttribute("style","width: 100%"),d.srcObject=t,o.appendChild(d),d.onloadedmetadata=function(e){var t=50,o=20,r=200,c=30,i=d.getBoundingClientRect();a.style.height=i.height+"px",a.style.width=i.width+"px",a.style.top=i.top+"px",a.style.left=i.left+"px";n.fillStyle="rgba(71, 76, 85, .5)",n.fillRect(0,0,i.width,i.height),n.clearRect(t,o,r,c),n.strokeStyle="#fdd740",n.strokeRect(t,o,r,c),d.play(),BarcodeScanner.DecodeStream(d)}}).catch(function(e){console.log(e)})}function stopBarcodeReader(){var e=document.getElementById("barcode-reader");document.body.removeChild(e),window.currentStream.stop()}